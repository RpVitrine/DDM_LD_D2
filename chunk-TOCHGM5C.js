import{a as kt,b as Lt,e as At,f as Bt}from"./chunk-VHKDRKCQ.js";import{$ as ht,$a as N,A as S,Aa as et,B as T,Ba as St,Bb as it,C as m,Ca as tt,Cb as ot,D as re,Da as we,E as ae,Ea as Q,F as le,Fa as Ae,Fb as Gt,G as Ke,Ga as Be,Gb as Ft,H as d,Ha as We,Hb as Re,I as x,Ib as ze,J as y,Ja as Ie,Jb as qe,K as w,Ka as ie,L as I,La as Et,M as b,Ma as vt,N as D,Na as $,Oa as ee,P as L,Pa as se,Q as A,R as ut,S as B,Sa as wt,T as H,V as xe,Va as be,Wa as de,X as ge,Ya as oe,Z as Ct,Za as ne,a as _t,ab as Oe,b as Se,bb as U,cb as me,d as fe,db as R,e as he,eb as It,f as ft,fa as ue,fb as $e,g as c,ga as W,gb as bt,h as p,ha as Ee,hb as yt,i as s,ia as xt,j as f,ja as J,k as P,ka as ve,l as Z,la as De,m as C,ma as Me,mb as Pt,n as F,na as Tt,nb as Dt,o as h,oa as Ve,ob as Mt,p as Le,pa as Y,pb as Vt,q as k,qa as Ge,r as E,s as v,sb as je,t as _,ta as z,tb as Ne,u as a,ub as Ue,v as l,w as u,wa as O,x as dt,xa as te,y as mt,ya as K,z as gt,za as X}from"./chunk-FXY3SLQI.js";import"./chunk-W6H37XDB.js";import"./chunk-2A22EAEI.js";import"./chunk-EPTDAVOA.js";import"./chunk-C64Z5H7B.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as pt,e as V}from"./chunk-JHI3MBHO.js";var j=(()=>{let n=class n{constructor(){}ngOnInit(){console.clear()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=P({type:n,selectors:[["app-loading"]],decls:8,vars:0,consts:[[1,"loading-overlay"],[1,"loading-content"],[1,"loading-animation"],[1,"task-bar","bar-1"],[1,"task-bar","bar-2"],[1,"task-bar","bar-3"],[1,"loading-message"]],template:function(e,r){e&1&&(dt(0,"div",0)(1,"div",1)(2,"div",2),gt(3,"div",3)(4,"div",4)(5,"div",5),mt(),dt(6,"p",6),d(7," A carregar as suas tarefas e fluxos de trabalho... "),mt()()())},styles:["@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0);background-color:#3182ce}40%{transform:scale(1);background-color:#38a169}}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#f7f9fc;display:flex;justify-content:center;align-items:center;z-index:9999}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;padding:30px}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-message[_ngcontent-%COMP%]{margin-top:25px;font-size:16px;color:#718096}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-animation[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;height:30px}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .task-bar[_ngcontent-%COMP%]{width:10px;height:10px;margin:0 5px;background-color:#3182ce;border-radius:5px;animation:_ngcontent-%COMP%_bounce 1.2s infinite ease-in-out both}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .task-bar.bar-2[_ngcontent-%COMP%]{animation-delay:-.32s}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .task-bar.bar-3[_ngcontent-%COMP%]{animation-delay:-.16s}"]});let o=n;return o})();var G=(()=>{let n=class n{constructor(){this.isLoading=new _t(!1),this.loading$=this.isLoading.asObservable()}getCurrentLoadingState(){return this.isLoading.value}setLoadingState(t){this.isLoading.next(t)}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();function ci(o,n){o&1&&u(0,"app-loading")}function pi(o,n){o&1&&(a(0,"div"),d(1,"O email \xE9 obrigat\xF3rio."),l())}function _i(o,n){o&1&&(a(0,"div"),d(1,"Formato inv\xE1lido."),l())}function fi(o,n){if(o&1&&(a(0,"div",21),Z(1,pi,2,0,"div",22)(2,_i,2,0,"div",22),l()),o&2){m();let i=Ke(13);s(),_("ngIf",i.errors==null?null:i.errors.required),s(),_("ngIf",i.errors==null?null:i.errors.email)}}function gi(o,n){o&1&&(a(0,"div",21),d(1," A senha \xE9 obrigat\xF3ria. "),l())}function ui(o,n){if(o&1&&(a(0,"ion-label",23),d(1),l()),o&2){let i=m(2);s(),y(" ",i.loginError," ")}}function Ci(o,n){if(o&1){let i=S();a(0,"ion-item",5),u(1,"ion-img",6),l(),a(2,"div",7)(3,"ion-card",8)(4,"ion-card-header",9)(5,"ion-card-title",10),d(6,"Acesso ao Sistema"),l()(),a(7,"ion-card-content",11)(8,"form",12,0),T("ngSubmit",function(){c(i);let e=m();return p(e.onLogin())}),a(10,"ion-list",13)(11,"ion-item",14)(12,"ion-input",15,1),b("ngModelChange",function(e){c(i);let r=m();return I(r.credentials.email,e)||(r.credentials.email=e),p(e)}),l()(),Z(14,fi,3,2,"div",16),a(15,"ion-item",14)(16,"ion-input",17,2),b("ngModelChange",function(e){c(i);let r=m();return I(r.credentials.password,e)||(r.credentials.password=e),p(e)}),u(18,"ion-input-password-toggle",18),l()(),Z(19,gi,2,0,"div",16),l(),a(20,"ion-button",19),d(21," ACESSAR "),l(),Z(22,ui,2,1,"ion-label",20),l()()()()}if(o&2){let i=Ke(9),t=Ke(13),e=Ke(17),r=m();s(),_("src",D(r.logo))("alt",D(r.logoAlt)),s(11),w("ngModel",r.credentials.email),s(2),_("ngIf",t.invalid&&(t.dirty||t.touched)),s(2),w("ngModel",r.credentials.password),s(3),_("ngIf",e.invalid&&(e.dirty||e.touched)),s(),_("disabled",!i.valid),s(2),_("ngIf",r.loginError)}}function hi(o,n){if(o&1&&(a(0,"ion-item")(1,"ion-label"),d(2),l()()),o&2){let i=m(2);s(2),y(" ",i.modalChangePasswordError," ")}}function xi(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",24)(3,"ion-button",25),T("click",function(){c(i);let e=m();return p(e.cancel())}),d(4,"Cancelar"),l()(),a(5,"ion-title"),d(6,"Trocar palavra passe"),l(),a(7,"ion-buttons",18)(8,"ion-button",26),T("click",function(){c(i);let e=m();return p(e.confirm())}),d(9,"Confirmar"),l()()()(),a(10,"ion-content",27)(11,"ion-item")(12,"ion-input",28),b("ngModelChange",function(e){c(i);let r=m();return I(r.modalPassword,e)||(r.modalPassword=e),p(e)}),u(13,"ion-input-password-toggle",18),l()(),a(14,"ion-item")(15,"ion-input",29),b("ngModelChange",function(e){c(i);let r=m();return I(r.modalConfPassword,e)||(r.modalConfPassword=e),p(e)}),u(16,"ion-input-password-toggle",18),l()(),C(17,hi,3,1,"ion-item"),l()}if(o&2){let i=m();s(8),_("strong",!0),s(4),w("ngModel",i.modalPassword),s(3),w("ngModel",i.modalConfPassword),s(2),h(i.modalChangePasswordError?17:-1)}}var Ot=(()=>{let n=class n{constructor(t,e,r,g,M){this.auth=t,this.route=e,this.userService=r,this.loadingState=g,this.titleService=M,this.modalPassword="",this.modalConfPassword="",this.modalChangePasswordError="",this.modalConfirm=!1,this.isLoading=!1,this.logo="assets/icon/favicon.png",this.logoAlt="ITask Logo",this.credentials={email:"",password:""},this.loginError="",this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!1),this.titleService.setTitle("Login")}ngOnDestroy(){this.modalConfirm==!1&&(localStorage.clear(),this.route.navigate(["/folder/login"]))}onLogin(){let{email:t,password:e}=this.credentials;this.loadingState.setLoadingState(!0),this.auth.login(t,e).subscribe({next:r=>{this.loadingState.setLoadingState(!1),localStorage.setItem("token",r.access_token),r.change_password?(this.modalConfirm=!1,this.modal.backdropDismiss=!1,this.modal.present()):(this.modalConfirm=!0,this.credentials.email="",this.credentials.password="",this.route.navigateByUrl("/"))},error:r=>{this.loadingState.setLoadingState(!1),this.loginError=r.error.error}})}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(this.modalPassword,"confirm")}onWillDismiss(t){t.detail.role==="confirm"?(this.loadingState.setLoadingState(!0),this.userService.changePassword(this.modalPassword,this.modalPassword).subscribe({next:e=>{this.modalConfirm=!0,this.credentials.email="",this.credentials.password="",this.route.navigate(["/folder/programador"])},error:e=>{this.loadingState.setLoadingState(!1),this.modalConfirm=!1,this.modalChangePasswordError=e.error.error}})):t.detail.role==="cancel"&&(this.loadingState.setLoadingState(!1),this.modalConfirm=!1,localStorage.clear(),this.credentials.email="",this.credentials.password="")}};n.\u0275fac=function(e){return new(e||n)(f(It),f(ht),f($e),f(G),f(ge))},n.\u0275cmp=P({type:n,selectors:[["app-login"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:6,vars:4,consts:[["loginForm","ngForm"],["emailInput","ngModel"],["passwordInput","ngModel"],[1,"ion-padding",3,"fullscreen"],["trigger","open-modal",3,"willDismiss"],["color","none","lines","none"],[1,"logo-login","mx-auto","my-2",2,"width","150px","height","auto",3,"src","alt"],[1,"login-container"],[1,"shadow-lg","border-0","rounded-4"],[1,"ion-text-center","py-5"],[1,"fw-bolder","fs-2"],[1,"px-3","px-md-4","pb-4"],["novalidate","",3,"ngSubmit"],["lines","",1,"ion-no-padding"],["fill","outline",1,"mb-3"],["name","email","label","Email","labelPlacement","stacked","placeholder","seu.email@empresa.com","type","email","required","",3,"ngModelChange","ngModel"],["class","text-danger small mb-3 mt-1 ps-2",4,"ngIf"],["name","password","label","Senha","labelPlacement","stacked","type","password","placeholder","********","required","",3,"ngModelChange","ngModel"],["slot","end"],["expand","block","type","submit","size","large",1,"btn","fw-bold","text-uppercase","rounded-3","py-2","mt-4",3,"disabled"],["class","ion-text-center text-danger mt-2 d-block",4,"ngIf"],[1,"text-danger","small","mb-3","mt-1","ps-2"],[4,"ngIf"],[1,"ion-text-center","text-danger","mt-2","d-block"],["slot","start"],[3,"click"],[3,"click","strong"],[1,"ion-padding"],["label","Nova password","labelPlacement","stacked","type","password","placeholder","********",3,"ngModelChange","ngModel"],["label","Confirmar nova password","labelPlacement","stacked","type","password","placeholder","********",3,"ngModelChange","ngModel"]],template:function(e,r){e&1&&(a(0,"ion-content",3),C(1,ci,1,0,"app-loading"),L(2,"async"),F(3,Ci,23,10),a(4,"ion-modal",4),T("willDismiss",function(M){return r.onWillDismiss(M)}),Z(5,xi,18,4,"ng-template"),l()()),e&2&&(_("fullscreen",!1),s(),h(A(2,2,r.loading$)?1:3))},dependencies:[Q,O,K,et,tt,X,te,ie,z,oe,ne,se,$,U,vt,H,ut,Y,ve,W,Ee,Tt,J,xt,ee,j,Et,B],encapsulation:2});let o=n;return o})();var Je=(()=>{let n=class n{constructor(t){this.http=t}criarGestor(t,e,r){let g=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/criar_gestor`,{email:t,nome:e,departamento:r},{headers:{Authorization:`Bearer ${g}`}})}getAllGestores(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/get_all_gestores`,{headers:{Authorization:`Bearer ${t}`}})}editGestor(t,e,r){let g=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/editar_gestor`,{id:t,nome:e,departamento:r},{headers:{Authorization:`Bearer ${g}`}})}eliminarGestor(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/eliminar_gestor`,{id:t},{headers:{Authorization:`Bearer ${e}`}})}};n.\u0275fac=function(e){return new(e||n)(he(xe))},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();var nt=(()=>{let n=class n{constructor(t){this.http=t}getAllDepartamentos(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/get_all_departamentos`,{headers:{Authorization:`Bearer ${t}`}})}};n.\u0275fac=function(e){return new(e||n)(he(xe))},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();function Ti(o,n){o&1&&u(0,"app-loading")}function Si(o,n){o&1&&(a(0,"span"),d(1,"O email \xE9 obrigat\xF3rio."),l())}function Ei(o,n){o&1&&(a(0,"span"),d(1,"Insira um email v\xE1lido."),l())}function vi(o,n){if(o&1&&(a(0,"div",6),C(1,Si,2,0,"span"),C(2,Ei,2,0,"span"),l()),o&2){let i,t,e=m(2);s(),h(!((i=e.managerForm.get("email"))==null||i.errors==null)&&i.errors.required?1:-1),s(),h(!((t=e.managerForm.get("email"))==null||t.errors==null)&&t.errors.email?2:-1)}}function wi(o,n){o&1&&(a(0,"span"),d(1,"O nome \xE9 obrigat\xF3rio."),l())}function Ii(o,n){if(o&1&&(a(0,"div",6),C(1,wi,2,0,"span"),l()),o&2){let i,t=m(2);s(),h(!((i=t.managerForm.get("nome"))==null||i.errors==null)&&i.errors.required?1:-1)}}function bi(o,n){if(o&1&&(a(0,"ion-select-option",10),d(1),l()),o&2){let i=n.$implicit;_("value",i.departamento),s(),x(i.departamento)}}function yi(o,n){o&1&&(a(0,"div",6)(1,"span"),d(2,"O departamento \xE9 obrigat\xF3rio."),l()())}function Pi(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Criar Novo Gestor"),l(),a(2,"form",1),T("ngSubmit",function(){c(i);let e=m();return p(e.onSubmit())}),a(3,"div",2)(4,"div",3)(5,"ion-item",4),u(6,"ion-input",5),l(),C(7,vi,3,2,"div",6),l(),a(8,"div",3)(9,"ion-item",4),u(10,"ion-input",7),l(),C(11,Ii,2,1,"div",6),l(),a(12,"div",3)(13,"ion-item",4)(14,"ion-select",8)(15,"div",9),d(16,"Departamento"),l(),E(17,bi,2,2,"ion-select-option",10,k),l()(),C(19,yi,3,0,"div",6),l(),a(20,"div",11)(21,"ion-button",12),d(22," Criar gestor "),l()()()()}if(o&2){let i,t,e,r=m();s(2),_("formGroup",r.managerForm),s(5),h((i=r.managerForm.get("email"))!=null&&i.invalid&&((i=r.managerForm.get("email"))!=null&&i.touched)?7:-1),s(4),h((t=r.managerForm.get("nome"))!=null&&t.invalid&&((t=r.managerForm.get("nome"))!=null&&t.touched)?11:-1),s(6),v(r.departamentos),s(2),h((e=r.managerForm.get("departamento"))!=null&&e.invalid&&((e=r.managerForm.get("departamento"))!=null&&e.touched)?19:-1),s(2),_("disabled",r.managerForm.invalid)}}var jt=(()=>{let n=class n{constructor(t,e,r,g,M){this.fb=t,this.gestorService=e,this.departamentoService=r,this.loadingState=g,this.alertController=M,this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.departamentoService.getAllDepartamentos().subscribe({next:t=>{this.loadingState.setLoadingState(!1),this.departamentos=t},error:t=>{this.loadingState.setLoadingState(!1),console.log(t.error.error)}}),this.managerForm=this.fb.group({email:["",[ue.required,ue.email]],nome:["",[ue.required]],departamento:["",[ue.required]]})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}onSubmit(){if(this.managerForm.invalid){this.managerForm.markAllAsTouched();return}this.loadingState.setLoadingState(!0);let{departamento:t,email:e,nome:r}=this.managerForm.value;this.gestorService.criarGestor(e,r,t).subscribe({next:g=>{this.loadingState.setLoadingState(!1),this.presentAlert("Sucesso",`${g.message} 
          Senha Tempor\xE1ria: ${g.senha_temporaria}`),this.managerForm.reset()},error:g=>{this.loadingState.setLoadingState(!1),this.presentAlert("Erro",g.error.error)}})}};n.\u0275fac=function(e){return new(e||n)(f(Ve),f(Je),f(nt),f(G),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-dono-criar-gestor"]],decls:3,vars:3,consts:[[1,"mb-4","text-center"],[1,"container-sm","my-4","p-0",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12"],["fill","outline",1,"w-100"],["label","Email","type","email","formControlName","email"],[1,"text-danger","small","mt-1","ps-3"],["label","Nome","type","text","formControlName","nome"],["formControlName","departamento"],["slot","label"],[3,"value"],[1,"col-12","mt-4"],["type","submit","expand","block","size","large",3,"disabled"]],template:function(e,r){e&1&&(C(0,Ti,1,0,"app-loading"),L(1,"async"),F(2,Pi,23,5)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[H,Ge,ve,W,Ee,De,Me,$,U,me,de,O,j,B],encapsulation:2});let o=n;return o})();function Di(o,n){o&1&&u(0,"app-loading")}function Mi(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",5)(11,"ion-button",6),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(12," Editar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.email),s(2),y("Departamento: ",i.departamento)}}function Vi(o,n){if(o&1&&(a(0,"ion-select-option",17),d(1),l()),o&2){let i=n.$implicit;_("value",i.departamento),s(),x(i.departamento)}}function Gi(o,n){if(o&1){let i=S();a(0,"ion-list")(1,"ion-item"),u(2,"ion-input",12),l(),a(3,"ion-item"),u(4,"ion-input",13),l(),a(5,"ion-item")(6,"ion-input",14),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.userToEdit.nome,e)||(r.userToEdit.nome=e),p(e)}),l()(),a(7,"ion-item")(8,"ion-select",15),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.userToEdit.departamento,e)||(r.userToEdit.departamento=e),p(e)}),a(9,"div",16),d(10,"Departamento"),l(),E(11,Vi,2,2,"ion-select-option",17,k),l()(),a(13,"ion-item")(14,"ion-button",8),T("click",function(){c(i);let e=m(3);return p(e.reiniciarPassword())}),d(15,"Reiniciar password"),l()()()}if(o&2){let i=m(3);s(2),_("placeholder",D(i.userToEdit.idUser)),s(2),_("placeholder",D(i.userToEdit.email)),s(2),_("placeholder",D(i.userToEdit.nome)),w("ngModel",i.userToEdit.nome),s(2),w("ngModel",i.userToEdit.departamento),s(3),v(i.departamentos)}}function Fi(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Editar gestor"),l(),a(4,"ion-buttons",7)(5,"ion-button",8),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",9)(8,"ion-button",10),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Salvar"),l()()()(),a(10,"ion-content",11),C(11,Gi,16,8,"ion-list"),l()}if(o&2){let i=m(2);s(11),h(i.userToEdit?11:-1)}}function ki(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Editar Gestor"),l(),a(2,"ion-item")(3,"ion-input",1),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()(),E(4,Mi,13,3,"ion-card",null,k),a(6,"ion-modal",2),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(7,Fi,12,1,"ng-template"),l()}if(o&2){let i=m();s(3),w("ngModel",i.searchTerm),s(),v(i.filteredUsers)}}var Nt=(()=>{let n=class n{constructor(t,e,r,g,M){this.gestorService=t,this.departamentoService=e,this.loadingState=r,this.userService=g,this.alertController=M,this.users=[],this.isModalEditOpen=!1,this.userToEdit=null,this.departamentos=[],this.searchTerm="",this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.departamentoService.getAllDepartamentos().subscribe({next:t=>{this.departamentos=t},error:t=>{console.log(t.error.error)}}),this.geAllGestors()}get filteredUsers(){return this.searchTerm.trim()?this.users.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.users}geAllGestors(){this.gestorService.getAllGestores().subscribe({next:t=>{this.loadingState.setLoadingState(!1),this.users=t},error:t=>{this.loadingState.setLoadingState(!1),console.log(t.error.error)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}reiniciarPassword(){this.userService.resetPassword(this.userToEdit.idUser).subscribe({next:t=>{this.presentAlert("Senha reiniciada",t.message)},error:t=>{this.presentAlert("Erro ao reiniciar a senha",t.error.error)}})}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(null,"confirm")}onWillDismiss(t){if(t.detail.role==="confirm"){let e=this.userToEdit.idUser,r=this.userToEdit.nome,g=this.userToEdit.departamento;this.userToEdit=null,this.loadingState.setLoadingState(!0),this.gestorService.editGestor(e,r,g).subscribe({next:M=>{this.loadingState.setLoadingState(!1),this.presentAlert("Gestor atualizado",M.message),this.userToEdit=null,this.geAllGestors()},error:M=>{this.loadingState.setLoadingState(!1),this.presentAlert("Erro ao editar gestor",M.error.error),this.userToEdit=null,this.geAllGestors()}})}else t.detail.role==="cancel"&&(this.userToEdit=null,this.geAllGestors())}setOpen(t){t!=null&&this.departamentos?.length>0?(this.userToEdit=t,this.modal.backdropDismiss=!1,this.modal.present()):this.userToEdit=null}};n.\u0275fac=function(e){return new(e||n)(f(Je),f(nt),f(G),f($e),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-dono-editar-gestor"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],["placeholder","Pesquisar por nome ou email...",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","primary",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","success",3,"click"],[1,"ion-padding"],["label","ID: ","disabled","true",3,"placeholder"],["label","Email: ","disabled","true",3,"placeholder"],["label","Nome: ","name","nome",3,"ngModelChange","placeholder","ngModel"],["name","departamento",3,"ngModelChange","ngModel"],["slot","label"],[3,"value"]],template:function(e,r){e&1&&(C(0,Di,1,0,"app-loading"),L(1,"async"),F(2,ki,8,1)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[ee,X,K,$,se,U,te,z,Q,ne,oe,ie,O,de,me,H,Y,W,J,j,B],encapsulation:2});let o=n;return o})();function Li(o,n){o&1&&u(0,"app-loading")}function Ai(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",5)(11,"ion-button",6),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(12," Eliminar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.email),s(2),y("Departamento: ",i.departamento)}}function Bi(o,n){if(o&1&&(a(0,"ion-list")(1,"ion-item")(2,"ion-label"),d(3,"Ao eliminar este gestor, todos os programadores e as tarefas atribu\xEDdas a ele ser\xE3o removidas. Tem a certeza que pretende continuar?"),l()(),a(4,"ion-item"),u(5,"ion-input",13),l(),a(6,"ion-item"),u(7,"ion-input",14),l(),a(8,"ion-item"),u(9,"ion-input",15),l(),a(10,"ion-item"),u(11,"ion-input",16),l()()),o&2){let i=m(3);s(5),_("placeholder",D(i.userToDelete.idUser)),s(2),_("placeholder",D(i.userToDelete.email)),s(2),_("placeholder",D(i.userToDelete.nome)),s(2),_("placeholder",D(i.userToDelete.departamento))}}function Wi(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Eliminar Gestor"),l(),a(4,"ion-buttons",7)(5,"ion-button",8),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",9)(8,"ion-button",10),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Eliminar"),l()()()(),a(10,"ion-content",11)(11,"div",12),C(12,Bi,12,8,"ion-list"),l()()}if(o&2){let i=m(2);s(12),h(i.userToDelete?12:-1)}}function Oi(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Eliminar Gestor"),l(),a(2,"ion-item")(3,"ion-input",1),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()(),E(4,Ai,13,3,"ion-card",null,k),a(6,"ion-modal",2),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(7,Wi,13,1,"ng-template"),l()}if(o&2){let i=m();s(3),w("ngModel",i.searchTerm),s(),v(i.filteredUsers)}}var Ut=(()=>{let n=class n{constructor(t,e,r){this.loadingState=t,this.gestorService=e,this.alertController=r,this.users=[],this.userToDelete=null,this.searchTerm="",this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.get_all_gestors()}get filteredUsers(){return this.searchTerm.trim()?this.users.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.users}get_all_gestors(){this.gestorService.getAllGestores().subscribe({next:t=>{this.loadingState.setLoadingState(!1),this.users=t},error:t=>{this.loadingState.setLoadingState(!1),console.log(t.error.error)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(null,"confirm")}onWillDismiss(t){if(t.detail.role==="confirm"&&this.userToDelete){this.loadingState.setLoadingState(!0);let e=this.userToDelete.idUser;this.gestorService.eliminarGestor(e).subscribe({next:r=>{this.loadingState.setLoadingState(!1),this.presentAlert("Sucesso",r.message||"Gestor eliminado com sucesso."),this.userToDelete=null,this.get_all_gestors()},error:r=>{this.loadingState.setLoadingState(!1),this.presentAlert("Erro",r.error?.error||"Erro ao eliminar o gestor."),this.userToDelete=null}})}else this.userToDelete=null}setOpen(t){t!=null?(this.userToDelete=t,this.modal.present()):this.userToDelete=null}};n.\u0275fac=function(e){return new(e||n)(f(G),f(Je),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-dono-eliminar-gestor"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],["placeholder","Pesquisar por nome ou email...",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","danger",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","danger",3,"click"],[1,"ion-padding"],[1,"ion-padding-bottom"],["label","ID: ","disabled","true",3,"placeholder"],["label","Email: ","disabled","true",3,"placeholder"],["label","Nome: ","disabled","true",3,"placeholder"],["label","Departamento: ","disabled","true",3,"placeholder"]],template:function(e,r){e&1&&(C(0,Li,1,0,"app-loading"),L(1,"async"),F(2,Oi,8,1)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[ee,X,K,H,O,z,ie,ne,oe,te,Q,se,$,U,j,Y,W,J,B],encapsulation:2});let o=n;return o})();function $i(o,n){if(o&1){let i=S();a(0,"ion-fab-button",5),T("click",function(){let e=c(i).$implicit,r=m();return p(r.handleAction(e.text))}),a(1,"ion-icon",6),d(2),l()()}if(o&2){let i=n.$implicit;_("title",i.text),s(),_("ios",i.icon+"-outline")("md",i.icon+"-sharp"),s(),x(i.text)}}function ji(o,n){o&1&&u(0,"app-dono-criar-gestor")}function Ni(o,n){o&1&&u(0,"app-dono-editar-gestor")}function Ui(o,n){o&1&&u(0,"app-dono-eliminar-gestor")}var Rt=(()=>{let n=class n{constructor(t){this.titleService=t,this.actualPage="Criar gestor",this.actions=[{text:"Criar gestor",icon:"person-add"},{text:"Editar gestor",icon:"create"},{text:"Eliminar gestor",icon:"trash"}],qe({personAddSharp:ot,personAddOutline:it,createOutline:Ne,createSharp:Ue,trashSharp:ze,trashOutline:Re,chevronUpCircle:je})}ngOnInit(){this.titleService.setTitle("Gestores")}handleAction(t){this.actualPage=t}};n.\u0275fac=function(e){return new(e||n)(f(ge))},n.\u0275cmp=P({type:n,selectors:[["app-dono-gestor"]],decls:11,vars:4,consts:[[1,"ion-padding",3,"fullscreen"],["slot","fixed","vertical","bottom","horizontal","end"],["name","chevron-up-circle"],["side","top"],[3,"title"],[3,"click","title"],[3,"ios","md"]],template:function(e,r){e&1&&(a(0,"ion-content",0)(1,"ion-fab",1)(2,"ion-fab-button"),u(3,"ion-icon",2),l(),a(4,"ion-fab-list",3),E(5,$i,3,4,"ion-fab-button",4,k),l()(),a(7,"div"),C(8,ji,1,0,"app-dono-criar-gestor"),C(9,Ni,1,0,"app-dono-editar-gestor"),C(10,Ui,1,0,"app-dono-eliminar-gestor"),l()()),e&2&&(_("fullscreen",!1),s(5),v(r.actions),s(3),h(r.actualPage==="Criar gestor"?8:-1),s(),h(r.actualPage==="Editar gestor"?9:-1),s(),h(r.actualPage==="Eliminar gestor"?10:-1))},dependencies:[Be,We,Oe,Q,jt,Nt,Ut,Ae],encapsulation:2});let o=n;return o})();var pe=(()=>{let n=class n{constructor(t){this.http=t}criarProgramador(t,e,r){let g=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/criar_programador`,{email:t,nome:e,nivelExperiencia:r},{headers:{Authorization:`Bearer ${g}`}})}getAllProgramadores(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/get_all_programadores`,{headers:{Authorization:`Bearer ${t}`}})}getAllProgramadoresAndGestores(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/get_all_programadores_and_gestores`,{headers:{Authorization:`Bearer ${t}`}})}editProgramador(t,e,r){let g=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/editar_programador`,{id:t,nome:e,nivelExperiencia:r},{headers:{Authorization:`Bearer ${g}`}})}eliminarProgramador(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/eliminar_programador`,{id:t},{headers:{Authorization:`Bearer ${e}`}})}};n.\u0275fac=function(e){return new(e||n)(he(xe))},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();var rt=(()=>{let n=class n{constructor(t){this.http=t}getAllNivelExperiencia(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/get_all_nivel_experiencia`,{headers:{Authorization:`Bearer ${t}`}})}};n.\u0275fac=function(e){return new(e||n)(he(xe))},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();function Ri(o,n){o&1&&u(0,"app-loading")}function zi(o,n){o&1&&(a(0,"span"),d(1,"O email \xE9 obrigat\xF3rio."),l())}function qi(o,n){o&1&&(a(0,"span"),d(1,"Insira um email v\xE1lido."),l())}function Qi(o,n){if(o&1&&(a(0,"div",6),C(1,zi,2,0,"span"),C(2,qi,2,0,"span"),l()),o&2){let i,t,e=m(2);s(),h(!((i=e.managerForm.get("email"))==null||i.errors==null)&&i.errors.required?1:-1),s(),h(!((t=e.managerForm.get("email"))==null||t.errors==null)&&t.errors.email?2:-1)}}function Hi(o,n){o&1&&(a(0,"span"),d(1,"O nome \xE9 obrigat\xF3rio."),l())}function Ji(o,n){if(o&1&&(a(0,"div",6),C(1,Hi,2,0,"span"),l()),o&2){let i,t=m(2);s(),h(!((i=t.managerForm.get("nome"))==null||i.errors==null)&&i.errors.required?1:-1)}}function Yi(o,n){if(o&1&&(a(0,"ion-select-option",10),d(1),l()),o&2){let i=n.$implicit;_("value",i.nivel),s(),x(i.nivel)}}function Ki(o,n){o&1&&(a(0,"div",6)(1,"span"),d(2,"O n\xEDvel de experi\xEAncia \xE9 obrigat\xF3rio."),l()())}function Xi(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Criar Novo Programador"),l(),a(2,"form",1),T("ngSubmit",function(){c(i);let e=m();return p(e.onSubmit())}),a(3,"div",2)(4,"div",3)(5,"ion-item",4),u(6,"ion-input",5),l(),C(7,Qi,3,2,"div",6),l(),a(8,"div",3)(9,"ion-item",4),u(10,"ion-input",7),l(),C(11,Ji,2,1,"div",6),l(),a(12,"div",3)(13,"ion-item",4)(14,"ion-select",8)(15,"div",9),d(16,"N\xEDvel de Experi\xEAncia"),l(),E(17,Yi,2,2,"ion-select-option",10,k),l()(),C(19,Ki,3,0,"div",6),l(),a(20,"div",11)(21,"ion-button",12),d(22," Criar Programador "),l()()()()}if(o&2){let i,t,e,r=m();s(2),_("formGroup",r.managerForm),s(5),h((i=r.managerForm.get("email"))!=null&&i.invalid&&((i=r.managerForm.get("email"))!=null&&i.touched)?7:-1),s(4),h((t=r.managerForm.get("nome"))!=null&&t.invalid&&((t=r.managerForm.get("nome"))!=null&&t.touched)?11:-1),s(6),v(r.nivelExperiencia),s(2),h((e=r.managerForm.get("nivelExperiencia"))!=null&&e.invalid&&((e=r.managerForm.get("nivelExperiencia"))!=null&&e.touched)?19:-1),s(2),_("disabled",r.managerForm.invalid)}}var qt=(()=>{let n=class n{constructor(t,e,r,g,M){this.fb=t,this.programadorService=e,this.nivelExperienciaService=r,this.loadingState=g,this.alertController=M,this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.nivelExperienciaService.getAllNivelExperiencia().subscribe({next:t=>{this.loadingState.setLoadingState(!1),this.nivelExperiencia=t},error:t=>{this.loadingState.setLoadingState(!1),console.log(t.error.error)}}),this.managerForm=this.fb.group({email:["",[ue.required,ue.email]],nome:["",[ue.required]],nivelExperiencia:["",[ue.required]]})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}onSubmit(){if(this.managerForm.invalid){this.managerForm.markAllAsTouched();return}this.loadingState.setLoadingState(!0);let{nivelExperiencia:t,email:e,nome:r}=this.managerForm.value;this.programadorService.criarProgramador(e,r,t).subscribe({next:g=>{this.loadingState.setLoadingState(!1),this.presentAlert("Sucesso",`Programador criado com sucesso! Senha tempor\xE1ria: ${g.senha_temporaria}`),this.managerForm.reset()},error:g=>{this.loadingState.setLoadingState(!1),this.presentAlert("Erro",g.error.error)}})}};n.\u0275fac=function(e){return new(e||n)(f(Ve),f(pe),f(rt),f(G),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-criar-programador"]],decls:3,vars:3,consts:[[1,"mb-4","text-center"],[1,"container-sm","my-4","p-0",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12"],["fill","outline",1,"w-100"],["label","Email","type","email","formControlName","email"],[1,"text-danger","small","mt-1","ps-3"],["label","Nome","type","text","formControlName","nome"],["formControlName","nivelExperiencia"],["slot","label"],[3,"value"],[1,"col-12","mt-4"],["type","submit","expand","block","size","large",3,"disabled"]],template:function(e,r){e&1&&(C(0,Ri,1,0,"app-loading"),L(1,"async"),F(2,Xi,23,5)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[H,Ge,ve,W,Ee,De,Me,$,U,me,de,O,j,B],encapsulation:2});let o=n;return o})();function Zi(o,n){return this.nivelExperiencia}function eo(o,n){o&1&&u(0,"app-loading")}function to(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",5)(11,"ion-button",6),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(12," Editar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.email),s(2),y("Departamento: ",i.nivelExperiencia)}}function io(o,n){if(o&1&&(a(0,"ion-select-option",17),d(1),l()),o&2){let i=n.$implicit;_("value",i.nivel),s(),x(i.nivel)}}function oo(o,n){if(o&1){let i=S();a(0,"ion-list")(1,"ion-item"),u(2,"ion-input",12),l(),a(3,"ion-item"),u(4,"ion-input",13),l(),a(5,"ion-item")(6,"ion-input",14),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.userToEdit.nome,e)||(r.userToEdit.nome=e),p(e)}),l()(),a(7,"ion-item")(8,"ion-select",15),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.userToEdit.nivelExperiencia,e)||(r.userToEdit.nivelExperiencia=e),p(e)}),a(9,"div",16),d(10,"N\xEDvel de Experi\xEAncia"),l(),E(11,io,2,2,"ion-select-option",17,Zi,!0),l()()()}if(o&2){let i=m(3);s(2),_("placeholder",D(i.userToEdit.idUser)),s(2),_("placeholder",D(i.userToEdit.email)),s(2),_("placeholder",D(i.userToEdit.nome)),w("ngModel",i.userToEdit.nome),s(2),w("ngModel",i.userToEdit.nivelExperiencia),s(3),v(i.nivelExperiencia)}}function no(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Editar gestor"),l(),a(4,"ion-buttons",7)(5,"ion-button",8),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",9)(8,"ion-button",10),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Salvar"),l()()()(),a(10,"ion-content",11),C(11,oo,13,8,"ion-list"),l()}if(o&2){let i=m(2);s(11),h(i.userToEdit?11:-1)}}function ro(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Editar Programador"),l(),a(2,"ion-item")(3,"ion-input",1),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()(),E(4,to,13,3,"ion-card",null,k),a(6,"ion-modal",2),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(7,no,12,1,"ng-template"),l()}if(o&2){let i=m();s(3),w("ngModel",i.searchTerm),s(),v(i.filteredUsers)}}var Qt=(()=>{let n=class n{constructor(t,e,r,g){this.programadorService=t,this.nivelExperienciaService=e,this.loadingState=r,this.alertController=g,this.users=[],this.isModalEditOpen=!1,this.userToEdit=null,this.nivelExperiencia=[],this.searchTerm="",this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.nivelExperienciaService.getAllNivelExperiencia().subscribe({next:t=>{this.nivelExperiencia=t},error:t=>{console.log(t.error.error)}}),this.get_all_programadores()}get filteredUsers(){return this.searchTerm.trim()?this.users.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.users}get_all_programadores(){this.programadorService.getAllProgramadores().subscribe({next:t=>{this.loadingState.setLoadingState(!1),this.users=t},error:t=>{this.loadingState.setLoadingState(!1),console.log(t.error.error)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(null,"confirm")}onWillDismiss(t){if(t.detail.role==="confirm"){let e=this.userToEdit.idUser,r=this.userToEdit.nome,g=this.userToEdit.nivelExperiencia;this.userToEdit=null,this.loadingState.setLoadingState(!0),this.programadorService.editProgramador(e,r,g).subscribe({next:M=>{this.loadingState.setLoadingState(!1),this.presentAlert("Sucesso",M.message),this.userToEdit=null,this.get_all_programadores()},error:M=>{this.presentAlert("Erro",M.error.error),this.get_all_programadores()}})}else t.detail.role==="cancel"&&(this.userToEdit=null,this.get_all_programadores())}setOpen(t){t!=null&&this.nivelExperiencia?.length>0?(this.userToEdit=t,this.modal.backdropDismiss=!1,this.modal.present()):this.userToEdit=null}};n.\u0275fac=function(e){return new(e||n)(f(pe),f(rt),f(G),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-editar-programador"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],["placeholder","Pesquisar por nome ou email...",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","primary",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","success",3,"click"],[1,"ion-padding"],["label","ID: ","disabled","true",3,"placeholder"],["label","Email: ","disabled","true",3,"placeholder"],["label","Nome: ","name","nome",3,"ngModelChange","placeholder","ngModel"],["name","nivelExperiencia",3,"ngModelChange","ngModel"],["slot","label"],[3,"value"]],template:function(e,r){e&1&&(C(0,eo,1,0,"app-loading"),L(1,"async"),F(2,ro,8,1)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[K,ee,X,$,se,U,te,z,Q,ne,oe,ie,O,de,me,H,Y,W,J,j,B],encapsulation:2});let o=n;return o})();function ao(o,n){o&1&&u(0,"app-loading")}function lo(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",5)(11,"ion-button",6),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(12," Eliminar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.email),s(2),y("Departamento: ",i.nivelExperiencia)}}function so(o,n){if(o&1&&(a(0,"ion-list")(1,"ion-item")(2,"ion-label",13),d(3," Ao eliminar este programador, todas as tarefas atribu\xEDdas a ele ser\xE3o removidas. Tem a certeza que pretende continuar? "),l()(),a(4,"ion-item"),u(5,"ion-input",14),l(),a(6,"ion-item"),u(7,"ion-input",15),l(),a(8,"ion-item"),u(9,"ion-input",16),l(),a(10,"ion-item"),u(11,"ion-input",17),l()()),o&2){let i=m(3);s(5),_("placeholder",D(i.userToDelete.idUser)),s(2),_("placeholder",D(i.userToDelete.email)),s(2),_("placeholder",D(i.userToDelete.nome)),s(2),_("placeholder",D(i.userToDelete.nivelExperiencia))}}function mo(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Eliminar programador"),l(),a(4,"ion-buttons",7)(5,"ion-button",8),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",9)(8,"ion-button",10),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Eliminar"),l()()()(),a(10,"ion-content",11)(11,"div",12),C(12,so,12,8,"ion-list"),l()()}if(o&2){let i=m(2);s(12),h(i.userToDelete?12:-1)}}function co(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Eliminar Programador"),l(),a(2,"ion-item")(3,"ion-input",1),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()(),E(4,lo,13,3,"ion-card",null,k),a(6,"ion-modal",2),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(7,mo,13,1,"ng-template"),l()}if(o&2){let i=m();s(3),w("ngModel",i.searchTerm),s(),v(i.filteredUsers)}}var Ht=(()=>{let n=class n{constructor(t,e,r){this.loadingState=t,this.programadorService=e,this.alertController=r,this.users=[],this.userToDelete=null,this.searchTerm="",this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.get_all_programadores()}get filteredUsers(){return this.searchTerm.trim()?this.users.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.users}get_all_programadores(){this.programadorService.getAllProgramadores().subscribe({next:t=>{this.loadingState.setLoadingState(!1),this.users=t},error:t=>{this.loadingState.setLoadingState(!1),console.log(t.error.error)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(null,"confirm")}onWillDismiss(t){if(t.detail.role==="confirm"&&this.userToDelete){this.loadingState.setLoadingState(!0);let e=this.userToDelete.idUser;this.programadorService.eliminarProgramador(e).subscribe({next:r=>{this.loadingState.setLoadingState(!1),this.presentAlert("Sucesso",r.message||"Programador eliminado com sucesso."),this.userToDelete=null,this.get_all_programadores()},error:r=>{this.loadingState.setLoadingState(!1),this.presentAlert("Erro",r.error?.error||"Erro ao eliminar o gestor."),this.userToDelete=null}})}else this.userToDelete=null}setOpen(t){t!=null?(this.userToDelete=t,this.modal.present()):this.userToDelete=null}};n.\u0275fac=function(e){return new(e||n)(f(G),f(pe),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-eliminar-programador"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],["placeholder","Pesquisar por nome ou email...",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","danger",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","danger",3,"click"],[1,"ion-padding"],[1,"ion-padding-bottom"],[1,"ion-text-wrap"],["label","ID: ","disabled","true",3,"placeholder"],["label","Email: ","disabled","true",3,"placeholder"],["label","Nome: ","disabled","true",3,"placeholder"],["label","Departamento: ","disabled","true",3,"placeholder"]],template:function(e,r){e&1&&(C(0,ao,1,0,"app-loading"),L(1,"async"),F(2,co,8,1)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[K,X,ee,H,O,z,ie,ne,oe,te,Q,se,$,U,j,Y,W,J,B],encapsulation:2});let o=n;return o})();function po(o,n){if(o&1){let i=S();a(0,"ion-fab-button",5),T("click",function(){let e=c(i).$implicit,r=m();return p(r.handleAction(e.text))}),a(1,"ion-icon",6),d(2),l()()}if(o&2){let i=n.$implicit;_("title",i.text),s(),_("ios",i.icon+"-outline")("md",i.icon+"-sharp"),s(),x(i.text)}}function _o(o,n){o&1&&u(0,"app-gestor-criar-programador")}function fo(o,n){o&1&&u(0,"app-gestor-editar-programador")}function go(o,n){o&1&&u(0,"app-gestor-eliminar-programador")}var Jt=(()=>{let n=class n{constructor(t){this.titleService=t,this.actualPage="Criar programador",this.actions=[{text:"Criar programador",icon:"person-add"},{text:"Editar programador",icon:"create"},{text:"Eliminar programador",icon:"trash"}],qe({personAddSharp:ot,personAddOutline:it,createOutline:Ne,createSharp:Ue,trashSharp:ze,trashOutline:Re,chevronUpCircle:je})}ngOnInit(){this.titleService.setTitle("Programadores")}handleAction(t){this.actualPage=t}};n.\u0275fac=function(e){return new(e||n)(f(ge))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-programador"]],decls:11,vars:4,consts:[[1,"ion-padding",3,"fullscreen"],["slot","fixed","vertical","bottom","horizontal","end"],["name","chevron-up-circle"],["side","top"],[3,"title"],[3,"click","title"],[3,"ios","md"]],template:function(e,r){e&1&&(a(0,"ion-content",0)(1,"ion-fab",1)(2,"ion-fab-button"),u(3,"ion-icon",2),l(),a(4,"ion-fab-list",3),E(5,po,3,4,"ion-fab-button",4,k),l()(),a(7,"div"),C(8,_o,1,0,"app-gestor-criar-programador"),C(9,fo,1,0,"app-gestor-editar-programador"),C(10,go,1,0,"app-gestor-eliminar-programador"),l()()),e&2&&(_("fullscreen",!1),s(5),v(r.actions),s(3),h(r.actualPage==="Criar programador"?8:-1),s(),h(r.actualPage==="Editar programador"?9:-1),s(),h(r.actualPage==="Eliminar programador"?10:-1))},dependencies:[We,Be,Ae,Oe,Q,qt,Qt,Ht],encapsulation:2});let o=n;return o})();var uo=(o,n)=>n.gestor.idUser;function Co(o,n){o&1&&u(0,"app-loading")}function ho(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",5)(11,"ion-button",6),T("click",function(){let e=c(i).$implicit,r=m(3);return p(r.resetarPassword(e.idUser))}),d(12," Resetar password "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.email),s(2),y("N\xEDvel: ",i.nivelExperiencia)}}function xo(o,n){if(o&1&&E(0,ho,13,3,"ion-card",null,k),o&2){let i=m(2);v(i.filteredProgramadores)}}function To(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",5)(11,"ion-button",7),T("click",function(){let e=c(i).$implicit,r=m(3);return p(r.setOpen(e))}),d(12),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.gestor.nome),s(2),x(i.gestor.email),s(2),y("Departamento: ",i.gestor.departamento),s(2),_("disabled",i.programadores.length===0),s(),y(" Ver programadores (",i.programadores.length,") ")}}function So(o,n){if(o&1&&E(0,To,13,5,"ion-card",null,uo),o&2){let i=m(2);v(i.filteredGestores)}}function Eo(o,n){if(o&1){let i=S();a(0,"ion-grid")(1,"ion-row")(2,"ion-col",0)(3,"ion-button",1),T("click",function(){c(i);let e=m();return p(e.voltarBtn())}),d(4," Voltar "),l()()(),a(5,"ion-row")(6,"ion-col",0)(7,"ion-input",2),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()()()(),C(8,xo,2,0)(9,So,2,0)}if(o&2){let i=m();s(3),_("disabled",i.btnIsDisabled),s(4),w("ngModel",i.searchTerm),s(),h(i.isViewingProgramadores?8:9)}}var Yt=(()=>{let n=class n{constructor(t,e,r,g,M){this.programadorService=t,this.userService=e,this.loadingState=r,this.alertController=g,this.titleService=M,this.btnIsDisabled=!0,this.gestores=[],this.programadores=[],this.isViewingProgramadores=!1,this.gestorViewId="",this.loading$=this.loadingState.loading$,this.searchTerm=""}ngOnInit(){this.titleService.setTitle("Programadores"),this.isViewingProgramadores=!1,this.puxarDados()}get filteredGestores(){return this.searchTerm.trim()?this.gestores.filter(t=>t.gestor.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||t.gestor.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.gestores}get filteredProgramadores(){return this.searchTerm.trim()?this.programadores.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||t.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.programadores}puxarDados(){this.btnIsDisabled=!0,this.loadingState.setLoadingState(!0),this.programadorService.getAllProgramadoresAndGestores().subscribe({next:t=>{this.gestores=t,this.loadingState.setLoadingState(!1)},error:t=>{console.error("There was an error!",t.error.error),this.loadingState.setLoadingState(!1)}})}setOpen(t){this.gestorViewId=t.gestor.idUser,this.isViewingProgramadores=!0,this.btnIsDisabled=!1,this.programadores=this.gestores.find(e=>e.gestor.idUser===this.gestorViewId)?.programadores||[],this.searchTerm=""}voltarBtn(){this.isViewingProgramadores=!1,this.btnIsDisabled=!0,this.searchTerm="",this.puxarDados()}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}resetarPassword(t){this.userService.resetPassword(t).subscribe({next:e=>{this.presentAlert("Sucesso",e.message)},error:e=>{this.presentAlert("Erro",e.error.error)}})}};n.\u0275fac=function(e){return new(e||n)(f(pe),f($e),f(G),f(N),f(ge))},n.\u0275cmp=P({type:n,selectors:[["app-dono-programador"]],decls:3,vars:3,consts:[["size","12",1,"ion-text-center"],["size","medium",1,"mb-3",3,"click","disabled"],["placeholder","Pesquisar por nome ou email...",3,"ngModelChange","ngModel"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","danger",3,"click"],["size","small",3,"click","disabled"]],template:function(e,r){e&1&&(C(0,Co,1,0,"app-loading"),L(1,"async"),F(2,Eo,10,3)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[ee,X,K,O,j,$,Ie,be,we,Y,W,J,U,B],encapsulation:2});let o=n;return o})();var Te=(()=>{let n=class n{constructor(t){this.http=t}criarTarefa(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/criar_tipo_tarefa`,{nome:t},{headers:{Authorization:`Bearer ${e}`}})}editarTarefa(t,e){let r=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/editar_tipo_tarefa`,{idTipoTarefa:t,nome:e},{headers:{Authorization:`Bearer ${r}`}})}eliminarTarefa(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/eliminar_tipo_tarefa`,{idTipoTarefa:t},{headers:{Authorization:`Bearer ${e}`}})}getAllTipoTarefas(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/get_all_tipo_tarefa`,{headers:{Authorization:`Bearer ${t}`}})}};n.\u0275fac=function(e){return new(e||n)(he(xe))},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();function vo(o,n){o&1&&u(0,"app-loading")}function wo(o,n){o&1&&(a(0,"span"),d(1,"O nome \xE9 obrigat\xF3rio."),l())}function Io(o,n){o&1&&(a(0,"span"),d(1,"Insira um nome v\xE1lido."),l())}function bo(o,n){if(o&1&&(a(0,"div",6),C(1,wo,2,0,"span"),C(2,Io,2,0,"span"),l()),o&2){let i,t,e=m(2);s(),h(!((i=e.managerForm.get("nome"))==null||i.errors==null)&&i.errors.required?1:-1),s(),h(!((t=e.managerForm.get("nome"))==null||t.errors==null)&&t.errors.nome?2:-1)}}function yo(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Criar tipo de tarefa"),l(),a(2,"form",1),T("ngSubmit",function(){c(i);let e=m();return p(e.onSubmit())}),a(3,"div",2)(4,"div",3)(5,"ion-item",4),u(6,"ion-input",5),l(),C(7,bo,3,2,"div",6),l(),a(8,"div",7)(9,"ion-button",8),d(10," Criar tipo de tarefa "),l()()()()}if(o&2){let i,t=m();s(2),_("formGroup",t.managerForm),s(5),h((i=t.managerForm.get("nome"))!=null&&i.invalid&&((i=t.managerForm.get("nome"))!=null&&i.touched)?7:-1),s(2),_("disabled",t.managerForm.invalid)}}var Kt=(()=>{let n=class n{constructor(t,e,r,g){this.loadingState=t,this.fb=e,this.tipotarefaService=r,this.alertController=g,this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!1),this.managerForm=this.fb.group({nome:["",[ue.required]]})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}onSubmit(){if(this.managerForm.invalid){this.managerForm.markAllAsTouched();return}this.loadingState.setLoadingState(!0),this.tipotarefaService.criarTarefa(this.managerForm.value.nome).subscribe({next:t=>{this.managerForm.reset(),this.presentAlert("Sucesso",t.message),this.loadingState.setLoadingState(!1)},error:t=>{this.presentAlert("Erro",t.error.error),this.loadingState.setLoadingState(!1)}})}};n.\u0275fac=function(e){return new(e||n)(f(G),f(Ve),f(Te),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-criar-tipo-tarefa"]],decls:3,vars:3,consts:[[1,"mb-4","text-center"],[1,"container-sm","my-4","p-0",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12"],["fill","outline",1,"w-100"],["label","Nome","type","text","formControlName","nome"],[1,"text-danger","small","mt-1","ps-3"],[1,"col-12","mt-4"],["type","submit","expand","block","size","large",3,"disabled"]],template:function(e,r){e&1&&(C(0,vo,1,0,"app-loading"),L(1,"async"),F(2,yo,11,3)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[O,$,U,j,H,Ge,ve,W,Ee,De,Me,B],encapsulation:2});let o=n;return o})();var ye=(()=>{let n=class n{constructor(t){this.http=t}getEstadosTarefas(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/estados_tarefa`,{headers:{Authorization:`Bearer ${t}`}})}criarTarefa(t,e,r,g,M,Pe,ke,at,lt){let st=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/criar_tarefa`,{titulo:t,descricao:e,ordemExecucao:r,storyPoints:g,estadoTarefa:M,dataPrevistaInicio:Pe,dataPrevistaTermino:ke,idProgramador:at,idTipoTarefa:lt},{headers:{Authorization:`Bearer ${st}`}})}eliminarTarefa(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/eliminar_tarefa`,{idTarefa:t},{headers:{Authorization:`Bearer ${e}`}})}editTarefa(t,e,r,g,M,Pe,ke,at,lt,st){let mi=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/editar_tarefa`,{idTarefa:t,titulo:e,descricao:r,ordemExecucao:g,storyPoints:M,estadoTarefa:Pe,dataPrevistaInicio:ke,dataPrevistaTermino:at,idProgramador:lt,idTipoTarefa:st},{headers:{Authorization:`Bearer ${mi}`}})}getTarefas(){let t=localStorage.getItem("token");return this.http.get(`${R.apiUrl}/get_tarefas`,{headers:{Authorization:`Bearer ${t}`}})}changeStatusTarefa(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/change_status_tarefa`,{idTarefa:t},{headers:{Authorization:`Bearer ${e}`}})}getTarefasPorEstado(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/get_tarefa_estado`,{estadoTarefa:t},{headers:{Authorization:`Bearer ${e}`}})}getTarefaByIdProgramador(t){let e=localStorage.getItem("token");return this.http.post(`${R.apiUrl}/get_tarefas_programador`,{idProgramador:t},{headers:{Authorization:`Bearer ${e}`}})}};n.\u0275fac=function(e){return new(e||n)(he(xe))},n.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();var Po=(o,n)=>n.name,Do=(o,n)=>n.idUser,Mo=(o,n)=>n.nome;function Vo(o,n){o&1&&u(0,"app-loading")}function Go(o,n){if(o&1&&(a(0,"ion-select-option",8),d(1),l()),o&2){let i=n.$implicit;_("value",i.idUser),s(),y(" ",i.nome," ")}}function Fo(o,n){if(o&1&&(a(0,"div",5)(1,"ion-item",6)(2,"ion-select",7),E(3,Go,2,2,"ion-select-option",8,Do),l()()()),o&2){let i=m().$implicit,t=m(2);s(2),_("label",D(i.label)),s(),v(t.programadores)}}function ko(o,n){if(o&1&&(a(0,"ion-select-option",8),d(1),l()),o&2){let i=n.$implicit;_("value",i.idTipoTarefa),s(),y(" ",i.nome," ")}}function Lo(o,n){if(o&1&&(a(0,"div",5)(1,"ion-item",6)(2,"ion-select",9),E(3,ko,2,2,"ion-select-option",8,Mo),l()()()),o&2){let i=m().$implicit,t=m(2);s(2),_("label",D(i.label)),s(),v(t.tipoTarefas)}}function Ao(o,n){if(o&1&&(a(0,"ion-select-option",8),d(1),l()),o&2){let i=n.$implicit;_("value",i.estadoTarefa),s(),y(" ",i.estadoTarefa," ")}}function Bo(o,n){if(o&1&&(a(0,"div",5)(1,"ion-item",6)(2,"ion-select",10),E(3,Ao,2,2,"ion-select-option",8,k),l()()()),o&2){let i=m().$implicit,t=m(2);s(2),_("label",D(i.label)),s(),v(t.estadoTarefas)}}function Wo(o,n){if(o&1&&(a(0,"span"),d(1),l()),o&2){let i=m(3).$implicit;s(),y("",i.label," \xE9 obrigat\xF3rio.")}}function Oo(o,n){if(o&1&&(a(0,"div",13),C(1,Wo,2,1,"span"),l()),o&2){let i,t=m(2).$implicit,e=m(2);s(),h(!((i=e.managerForm.get(t.name))==null||i.errors==null)&&i.errors.required?1:-1)}}function $o(o,n){if(o&1&&(a(0,"div",5)(1,"ion-item",11),u(2,"ion-input",12),l(),C(3,Oo,2,1,"div",13),l()),o&2){let i,t=m().$implicit,e=m(2);s(2),_("label",t.label)("type",t.type)("formControlName",t.name),s(),h((i=e.managerForm.get(t.name))!=null&&i.invalid&&((i=e.managerForm.get(t.name))!=null&&i.touched)?3:-1)}}function jo(o,n){if(o&1&&C(0,Fo,5,2,"div",5)(1,Lo,5,2,"div",5)(2,Bo,5,2,"div",5)(3,$o,4,4,"div",5),o&2){let i=n.$implicit;h(i.label==="Programador"?0:i.label==="Tipo tarefa"?1:i.label==="Estado"?2:3)}}function No(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Criar tarefa"),l(),a(2,"form",1),T("ngSubmit",function(){c(i);let e=m();return p(e.onSubmit())}),a(3,"div",2),E(4,jo,4,1,null,null,Po),a(6,"div",3)(7,"ion-button",4),d(8," Criar tarefa "),l()()()()}if(o&2){let i=m();s(2),_("formGroup",i.managerForm),s(2),v(i.formFields),s(3),_("disabled",i.managerForm.invalid)}}var Xt=(()=>{let n=class n{constructor(t,e,r,g,M,Pe){this.loadingState=t,this.fb=e,this.tipoTarefaService=r,this.tarefaService=g,this.programadorService=M,this.alertController=Pe,this.loading$=this.loadingState.loading$,this.programadores=[],this.tipoTarefas=[],this.estadoTarefas=[],this.formFields=[{name:"titulo",label:"T\xEDtulo",type:"text",required:!0},{name:"descricao",label:"Descri\xE7\xE3o",type:"text",required:!0},{name:"ordemExecucao",label:"Ordem de Execu\xE7\xE3o",type:"number",required:!0},{name:"storyPoints",label:"Story Points",type:"number",required:!0},{name:"estadoTarefa",label:"Estado",type:"text",required:!0},{name:"dataPrevistaInicio",label:"In\xEDcio Previsto",type:"date",required:!0},{name:"dataPrevistaTermino",label:"T\xE9rmino Previsto",type:"date",required:!0},{name:"idProgramador",label:"Programador",type:"text",required:!0},{name:"idTipoTarefa",label:"Tipo tarefa",type:"text",required:!0}]}ngOnInit(){this.loadingState.setLoadingState(!0);let t={};this.formFields.forEach(e=>{t[e.name]=this.fb.control("",e.required?ue.required:null)}),this.managerForm=this.fb.group(t),Se({programadores:this.programadorService.getAllProgramadores(),tipos:this.tipoTarefaService.getAllTipoTarefas(),estados:this.tarefaService.getEstadosTarefas()}).subscribe({next:e=>{this.programadores=e.programadores,this.tipoTarefas=e.tipos,this.estadoTarefas=e.estados},error:e=>{this.presentAlert("Erro",e.error?.error||"Erro inesperado")},complete:()=>{this.loadingState.setLoadingState(!1)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}onSubmit(){if(this.managerForm.invalid){this.managerForm.markAllAsTouched();return}this.loadingState.setLoadingState(!0),this.tarefaService.criarTarefa(this.managerForm.value.titulo,this.managerForm.value.descricao,this.managerForm.value.ordemExecucao,this.managerForm.value.storyPoints,this.managerForm.value.estadoTarefa,this.managerForm.value.dataPrevistaInicio,this.managerForm.value.dataPrevistaTermino,this.managerForm.value.idProgramador,this.managerForm.value.idTipoTarefa).subscribe({next:t=>{this.managerForm.reset(),this.presentAlert("Sucesso",t.message),this.loadingState.setLoadingState(!1)},error:t=>{this.presentAlert("Erro",t.error.error),this.loadingState.setLoadingState(!1)}})}};n.\u0275fac=function(e){return new(e||n)(f(G),f(Ve),f(Te),f(ye),f(pe),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-criar-tarefa"]],decls:3,vars:3,consts:[[1,"mb-4","text-center"],[1,"container-sm","my-4","p-0",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"col-12","mt-4"],["type","submit","expand","block","size","large",3,"disabled"],[1,"col-12"],["fill","outline"],["formControlName","idProgramador","placeholder","Selecione um programador",3,"label"],[3,"value"],["formControlName","idTipoTarefa","placeholder","Selecione um tipo de tarefa",3,"label"],["formControlName","estadoTarefa","placeholder","Selecione um estado de tarefa",3,"label"],["fill","outline",1,"w-100"],[3,"label","type","formControlName"],[1,"text-danger","small","mt-1","ps-3"]],template:function(e,r){e&1&&(C(0,Vo,1,0,"app-loading"),L(1,"async"),F(2,No,9,2)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[O,me,$,U,j,H,Ge,ve,W,Ee,De,Me,de,B],encapsulation:2});let o=n;return o})();function Uo(o,n){o&1&&u(0,"app-loading")}function Ro(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l()()(),a(8,"div",5)(9,"ion-button",6),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(10," Editar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.idTipoTarefa)}}function zo(o,n){if(o&1){let i=S();a(0,"ion-list")(1,"ion-item"),u(2,"ion-input",12),l(),a(3,"ion-item")(4,"ion-input",13),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.tipoTarefaToEdit.nome,e)||(r.tipoTarefaToEdit.nome=e),p(e)}),l()()()}if(o&2){let i=m(3);s(2),_("placeholder",D(i.tipoTarefaToEdit.idTipoTarefa)),s(2),_("placeholder",D(i.tipoTarefaToEdit.nome)),w("ngModel",i.tipoTarefaToEdit.nome)}}function qo(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Editar tipo de tarefa"),l(),a(4,"ion-buttons",7)(5,"ion-button",8),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",9)(8,"ion-button",10),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Salvar"),l()()()(),a(10,"ion-content",11),C(11,zo,5,5,"ion-list"),l()}if(o&2){let i=m(2);s(11),h(i.tipoTarefaToEdit?11:-1)}}function Qo(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Editar tipo de tarefa"),l(),a(2,"ion-item")(3,"ion-input",1),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()(),E(4,Ro,11,2,"ion-card",null,k),a(6,"ion-modal",2),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(7,qo,12,1,"ng-template"),l()}if(o&2){let i=m();s(3),w("ngModel",i.searchTerm),s(),v(i.filteredTarefas)}}var Zt=(()=>{let n=class n{constructor(t,e,r){this.loadingState=t,this.tipoTarefasService=e,this.alertController=r,this.tarefas=[],this.tipoTarefaToEdit=null,this.searchTerm="",this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.GestorTarefas()}get filteredTarefas(){return this.searchTerm.trim()?this.tarefas.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())):this.tarefas}GestorTarefas(){this.tipoTarefasService.getAllTipoTarefas().subscribe({next:t=>{this.tarefas=t,this.loadingState.setLoadingState(!1)},error:t=>{console.error("There was an error!",t.error.error),this.loadingState.setLoadingState(!1)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}setOpen(t){this.tipoTarefaToEdit=t,this.modal.backdropDismiss=!1,this.modal.present()}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(null,"confirm")}onWillDismiss(t){t.detail.role==="confirm"&&this.tipoTarefaToEdit?this.tipoTarefasService.editarTarefa(this.tipoTarefaToEdit.idTipoTarefa,this.tipoTarefaToEdit.nome).subscribe({next:r=>{this.presentAlert("Sucesso",r.message||"Tipo de tarefa editado com sucesso."),this.GestorTarefas()},error:r=>{console.error("There was an error!",r.error.error)}}):(this.tipoTarefaToEdit=null,this.GestorTarefas())}};n.\u0275fac=function(e){return new(e||n)(f(G),f(Te),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-editar-tipo-tarefa"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],["placeholder","Pesquisar por nome...",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","primary",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","success",3,"click"],[1,"ion-padding"],["label","ID: ","disabled","true",3,"placeholder"],["label","Nome: ","name","nome",3,"ngModelChange","placeholder","ngModel"]],template:function(e,r){e&1&&(C(0,Uo,1,0,"app-loading"),L(1,"async"),F(2,Qo,8,1)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[te,ne,oe,ie,se,U,Q,X,K,O,ee,$,j,z,H,Y,W,J,B],encapsulation:2});let o=n;return o})();function Ho(o,n){o&1&&u(0,"app-loading")}function Jo(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",3)(3,"ion-label")(4,"h2",4),d(5),l(),a(6,"p"),d(7),l()()(),a(8,"div",5)(9,"ion-button",6),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(10," Eliminar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.idTipoTarefa)}}function Yo(o,n){if(o&1&&(a(0,"ion-list")(1,"ion-item"),u(2,"ion-input",12),l(),a(3,"ion-item"),u(4,"ion-input",13),l()()),o&2){let i=m(3);s(2),_("placeholder",D(i.tipoTarefaDelete.idTipoTarefa)),s(2),_("placeholder",D(i.tipoTarefaDelete.nome))}}function Ko(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Eliminar tipo de tarefa"),l(),a(4,"ion-buttons",7)(5,"ion-button",8),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",9)(8,"ion-button",10),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Eliminar"),l()()()(),a(10,"ion-content",11),C(11,Yo,5,4,"ion-list"),l()}if(o&2){let i=m(2);s(11),h(i.tipoTarefaDelete?11:-1)}}function Xo(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Eliminar tipo de tarefa"),l(),a(2,"ion-item")(3,"ion-input",1),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()(),E(4,Jo,11,2,"ion-card",null,k),a(6,"ion-modal",2),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(7,Ko,12,1,"ng-template"),l()}if(o&2){let i=m();s(3),w("ngModel",i.searchTerm),s(),v(i.filteredTarefas)}}var ei=(()=>{let n=class n{constructor(t,e,r){this.loadingState=t,this.tipoTarefasService=e,this.alertController=r,this.tarefas=[],this.tipoTarefaDelete=null,this.searchTerm="",this.loading$=this.loadingState.loading$}ngOnInit(){this.loadingState.setLoadingState(!0),this.GestorTarefas()}get filteredTarefas(){return this.searchTerm.trim()?this.tarefas.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())):this.tarefas}GestorTarefas(){this.tipoTarefasService.getAllTipoTarefas().subscribe({next:t=>{this.tarefas=t,this.loadingState.setLoadingState(!1)},error:t=>{this.presentAlert("ERRO",t.error.error),this.loadingState.setLoadingState(!1)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}setOpen(t){this.tipoTarefaDelete=t,this.modal.backdropDismiss=!1,this.modal.present()}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(null,"confirm")}onWillDismiss(t){t.detail.role==="confirm"&&this.tipoTarefaDelete?this.tipoTarefasService.eliminarTarefa(this.tipoTarefaDelete.idTipoTarefa).subscribe({next:r=>{this.presentAlert("Sucesso",r.message||"Tipo de tarefa eliminado com sucesso."),this.GestorTarefas()},error:r=>{this.presentAlert("ERRO",r.error.error)}}):(this.tipoTarefaDelete=null,this.GestorTarefas())}};n.\u0275fac=function(e){return new(e||n)(f(G),f(Te),f(N))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-eliminar-tipo-tarefa"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],["placeholder","Pesquisar por nome...",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","danger",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","danger",3,"click"],[1,"ion-padding"],["label","ID: ","disabled","true",3,"placeholder"],["label","Nome: ","disabled","true",3,"placeholder"]],template:function(e,r){e&1&&(C(0,Ho,1,0,"app-loading"),L(1,"async"),F(2,Xo,8,1)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[U,se,oe,ne,te,ie,Q,O,ee,$,K,X,j,z,Y,W,J,B],encapsulation:2});let o=n;return o})();var ti=(o,n)=>n.idUser,ii=(o,n)=>n.estadoTarefa,Zo=(o,n)=>n.idTipoTarefa;function en(o,n){o&1&&u(0,"app-loading")}function tn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.idTipoTarefa),s(),y(" ",i.nome," ")}}function on(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.idUser),s(),y(" ",i.nome," ")}}function nn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.estadoTarefa),s(),y(" ",i.estadoTarefa," ")}}function rn(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",11)(3,"ion-label")(4,"h2",12),d(5),l(),a(6,"p"),d(7,"Descri\xE7\xE3o: "),a(8,"strong"),d(9),l()(),a(10,"p"),d(11,"Data prevista inicio: "),a(12,"strong"),d(13),l()(),a(14,"p"),d(15,"Data prevista termino: "),a(16,"strong"),d(17),l()(),a(18,"p"),d(19,"Tipo de tarefa: "),a(20,"strong"),d(21),l()(),a(22,"p"),d(23,"Estado da tarefa: "),a(24,"strong"),d(25),l()(),a(26,"p"),d(27,"Programador atribu\xEDdo: "),a(28,"strong"),d(29),l()(),a(30,"p"),d(31,"Data cria\xE7\xE3o: "),a(32,"strong"),d(33),l()()()(),a(34,"div",13)(35,"ion-button",14),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(36," Editar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.tituloTarefa),s(4),x(i.descricao),s(4),x(i.dataPrevistaInicio),s(4),x(i.dataPrevistaFim),s(4),x(i.tipoTarefa==null?null:i.tipoTarefa.nome),s(4),x(i.estadoTarefa),s(4),x(i.programador==null?null:i.programador.nome),s(4),x(i.dataCriacao)}}function an(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.idTipoTarefa),s(),x(i.nome)}}function ln(o,n){if(o&1){let i=S();a(0,"ion-select",28),b("ngModelChange",function(e){c(i);let r=m(4);return I(r.selectedTipoTarefaId,e)||(r.selectedTipoTarefaId=e),p(e)}),E(1,an,2,2,"ion-select-option",7,Zo),l()}if(o&2){let i=m(4);w("ngModel",i.selectedTipoTarefaId),s(),v(i.tipoTarefas)}}function sn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.idUser),s(),x(i.nome)}}function dn(o,n){if(o&1){let i=S();a(0,"ion-select",29),b("ngModelChange",function(e){c(i);let r=m(4);return I(r.selectedProgramadorId,e)||(r.selectedProgramadorId=e),p(e)}),E(1,sn,2,2,"ion-select-option",7,ti),l()}if(o&2){let i=m(4);w("ngModel",i.selectedProgramadorId),s(),v(i.programadores)}}function mn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.estadoTarefa),s(),x(i.estadoTarefa)}}function cn(o,n){if(o&1){let i=S();a(0,"ion-select",30),b("ngModelChange",function(e){c(i);let r=m(4);return I(r.selectedEstadoTarefa,e)||(r.selectedEstadoTarefa=e),p(e)}),E(1,mn,2,2,"ion-select-option",7,ii),l()}if(o&2){let i=m(4);w("ngModel",i.selectedEstadoTarefa),s(),v(i.estadoTarefas)}}function pn(o,n){if(o&1){let i=S();a(0,"ion-list")(1,"ion-item"),u(2,"ion-input",20),l(),a(3,"ion-item")(4,"ion-input",21),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.tarefaEdit.tituloTarefa,e)||(r.tarefaEdit.tituloTarefa=e),p(e)}),l()(),a(5,"ion-item")(6,"ion-input",22),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.tarefaEdit.descricao,e)||(r.tarefaEdit.descricao=e),p(e)}),l()(),a(7,"ion-item"),C(8,ln,3,1,"ion-select",23),l(),a(9,"ion-item"),C(10,dn,3,1,"ion-select",24),l(),a(11,"ion-item"),C(12,cn,3,1,"ion-select",25),l(),a(13,"ion-item")(14,"ion-input",26),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.tarefaEdit.dataPrevistaInicio,e)||(r.tarefaEdit.dataPrevistaInicio=e),p(e)}),l()(),a(15,"ion-item")(16,"ion-input",27),b("ngModelChange",function(e){c(i);let r=m(3);return I(r.tarefaEdit.dataPrevistaFim,e)||(r.tarefaEdit.dataPrevistaFim=e),p(e)}),l()()()}if(o&2){let i=m(3);s(2),_("placeholder",D(i.tarefaEdit.idTarefa)),s(2),_("placeholder",D(i.tarefaEdit.tituloTarefa)),w("ngModel",i.tarefaEdit.tituloTarefa),s(2),_("placeholder",D(i.tarefaEdit.descricao)),w("ngModel",i.tarefaEdit.descricao),s(2),h(i.tarefaEdit.tipoTarefa?8:-1),s(2),h(i.tarefaEdit.programador?10:-1),s(2),h(i.tarefaEdit.estadoTarefa?12:-1),s(2),_("placeholder",D(i.tarefaEdit.dataPrevistaInicio)),w("ngModel",i.tarefaEdit.dataPrevistaInicio),s(2),_("placeholder",D(i.tarefaEdit.dataPrevistaFim)),w("ngModel",i.tarefaEdit.dataPrevistaFim)}}function _n(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Editar tarefa"),l(),a(4,"ion-buttons",15)(5,"ion-button",16),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",17)(8,"ion-button",18),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Salvar"),l()()()(),a(10,"ion-content",19),C(11,pn,17,17,"ion-list"),l()}if(o&2){let i=m(2);s(11),h(i.tarefaEdit?11:-1)}}function fn(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Editar tarefa"),l(),a(2,"ion-grid")(3,"ion-row",1)(4,"ion-col",2)(5,"ion-item")(6,"ion-input",3),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()()(),a(7,"ion-col",4)(8,"ion-item")(9,"ion-select",5),b("ngModelChange",function(e){c(i);let r=m();return I(r.filtroTipoTarefa,e)||(r.filtroTipoTarefa=e),p(e)}),a(10,"ion-select-option",6),d(11,"Todos"),l(),E(12,tn,2,2,"ion-select-option",7,Le),l()()(),a(14,"ion-col",4)(15,"ion-item")(16,"ion-select",8),b("ngModelChange",function(e){c(i);let r=m();return I(r.filtroProgramador,e)||(r.filtroProgramador=e),p(e)}),a(17,"ion-select-option",6),d(18,"Todos"),l(),E(19,on,2,2,"ion-select-option",7,ti),l()()()(),a(21,"ion-row",1)(22,"ion-col",4)(23,"ion-item")(24,"ion-select",9),b("ngModelChange",function(e){c(i);let r=m();return I(r.filtroEstadoTarefa,e)||(r.filtroEstadoTarefa=e),p(e)}),a(25,"ion-select-option",6),d(26,"Todos"),l(),E(27,nn,2,2,"ion-select-option",7,ii),l()()()()(),E(29,rn,37,8,"ion-card",null,k),a(31,"ion-modal",10),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(32,_n,12,1,"ng-template"),l()}if(o&2){let i=m();s(6),w("ngModel",i.searchTerm),s(3),w("ngModel",i.filtroTipoTarefa),s(3),v(i.tipoTarefas),s(4),w("ngModel",i.filtroProgramador),s(3),v(i.programadores),s(5),w("ngModel",i.filtroEstadoTarefa),s(3),v(i.estadoTarefas),s(2),v(i.filteredTarefas)}}var oi=(()=>{let n=class n{constructor(t,e,r,g,M){this.alertController=t,this.loadingState=e,this.tarefaService=r,this.tipoTarefaService=g,this.programadorService=M,this.filtroTipoTarefa="",this.filtroProgramador="",this.filtroEstadoTarefa="",this.programadores=[],this.tipoTarefas=[],this.estadoTarefas=[],this.tarefas=[],this.tarefaEdit={},this.loading$=this.loadingState.loading$,this.searchTerm=""}get filteredTarefas(){return this.tarefas.filter(t=>{let e=!this.searchTerm||t.tituloTarefa?.toLowerCase().includes(this.searchTerm.toLowerCase()),r=!this.filtroTipoTarefa||t.tipoTarefa?.idTipoTarefa===this.filtroTipoTarefa,g=!this.filtroProgramador||t.programador?.idUser===this.filtroProgramador,M=!this.filtroEstadoTarefa||t.estadoTarefa.toString()===this.filtroEstadoTarefa;return e&&r&&g&&M})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}ngOnInit(){this.getDados()}getDados(){this.loadingState.setLoadingState(!0),Se({programadores:this.programadorService.getAllProgramadores(),tipos:this.tipoTarefaService.getAllTipoTarefas(),estados:this.tarefaService.getEstadosTarefas(),tarefas:this.tarefaService.getTarefas()}).subscribe({next:({programadores:t,tipos:e,estados:r,tarefas:g})=>{this.programadores=t,this.tipoTarefas=e,this.estadoTarefas=r,this.tarefas=g},error:t=>{this.presentAlert("Erro",t.error?.error||"Erro inesperado")},complete:()=>{this.loadingState.setLoadingState(!1)}})}setOpen(t){this.tarefaEdit=pt({},t),this.selectedTipoTarefaId=t.tipoTarefa?.idTipoTarefa,this.selectedProgramadorId=t.programador?.idUser,this.selectedEstadoTarefa=t.estadoTarefa,this.modal.backdropDismiss=!1,this.modal.present()}cancel(){this.modal.dismiss(null,"cancel")}confirm(){if(this.selectedTipoTarefaId!==this.tarefaEdit.tipoTarefa?.idTipoTarefa){let t=this.tipoTarefas.find(e=>e.idTipoTarefa===this.selectedTipoTarefaId);t&&(this.tarefaEdit.tipoTarefa=t)}if(this.selectedProgramadorId!==this.tarefaEdit.programador?.idUser){let t=this.programadores.find(e=>e.idUser===this.selectedProgramadorId);t&&(this.tarefaEdit.programador=t)}if(this.selectedEstadoTarefa!==this.tarefaEdit.estadoTarefa?.estadoTarefa){let t=this.estadoTarefas.find(e=>e.estadoTarefa===this.selectedEstadoTarefa);t&&(this.tarefaEdit.estadoTarefa=t)}this.modal.dismiss(null,"confirm")}onWillDismiss(t){t.detail.role==="confirm"&&this.tarefaEdit?(this.loadingState.setLoadingState(!0),this.tarefaService.editTarefa(this.tarefaEdit.idTarefa,this.tarefaEdit.tituloTarefa,this.tarefaEdit.descricao,this.tarefaEdit.ordemExecucao,this.tarefaEdit.storyPoint,this.tarefaEdit.estadoTarefa?.estadoTarefa||"",this.tarefaEdit.dataPrevistaInicio,this.tarefaEdit.dataPrevistaFim,this.tarefaEdit.programador?.idUser||"",this.tarefaEdit.tipoTarefa?.idTipoTarefa||"").subscribe({next:()=>{this.presentAlert("Sucesso","Tarefa atualizada com sucesso."),this.getDados()},error:r=>{this.presentAlert("Erro",r.error?.error||"Erro inesperado"),this.getDados()}})):(this.tarefaEdit={},this.getDados())}};n.\u0275fac=function(e){return new(e||n)(f(N),f(G),f(ye),f(Te),f(pe))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-editar-tarefa"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],[1,"ion-align-items-center"],["size","12","size-md","6"],["placeholder","Pesquisar por t\xEDtulo...",3,"ngModelChange","ngModel"],["size","6","size-md","3"],["label","Tipo de tarefa","placeholder","Tipo de tarefa",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["label","Programador","placeholder","Programador",3,"ngModelChange","ngModel"],["label","Estado da tarefa","placeholder","Estado",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","primary",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","success",3,"click"],[1,"ion-padding"],["label","ID: ","disabled","true",3,"placeholder"],["label","Titulo: ",3,"ngModelChange","placeholder","ngModel"],["label","Descri\xE7\xE3o: ",3,"ngModelChange","placeholder","ngModel"],["label","Tipo de Tarefa: ","placeholder","Selecione o tipo de tarefa","name","idTipoTarefa",3,"ngModel"],["label","Programador: ","placeholder","Selecione o programador","name","idUser",3,"ngModel"],["label","Estado: ","placeholder","Selecione o estado","name","idEstadoTarefa",3,"ngModel"],["label","Data Prevista In\xEDcio: ","type","date",3,"ngModelChange","placeholder","ngModel"],["label","Data Prevista Fim: ","type","date",3,"ngModelChange","placeholder","ngModel"],["label","Tipo de Tarefa: ","placeholder","Selecione o tipo de tarefa","name","idTipoTarefa",3,"ngModelChange","ngModel"],["label","Programador: ","placeholder","Selecione o programador","name","idUser",3,"ngModelChange","ngModel"],["label","Estado: ","placeholder","Selecione o estado","name","idEstadoTarefa",3,"ngModelChange","ngModel"]],template:function(e,r){e&1&&(C(0,en,1,0,"app-loading"),L(1,"async"),F(2,fn,33,4)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[Ie,we,be,se,Q,te,oe,ne,ie,z,me,O,ee,X,K,U,$,j,Y,W,J,de,B],encapsulation:2});let o=n;return o})();var gn=(o,n)=>n.idUser,un=(o,n)=>n.estadoTarefa;function Cn(o,n){o&1&&u(0,"app-loading")}function hn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.idTipoTarefa),s(),y(" ",i.nome," ")}}function xn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.idUser),s(),y(" ",i.nome," ")}}function Tn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.estadoTarefa),s(),y(" ",i.estadoTarefa," ")}}function Sn(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",11)(3,"ion-label")(4,"h2",12),d(5),l(),a(6,"p"),d(7,"Descri\xE7\xE3o: "),a(8,"strong"),d(9),l()(),a(10,"p"),d(11,"Data prevista inicio: "),a(12,"strong"),d(13),l()(),a(14,"p"),d(15,"Data prevista termino: "),a(16,"strong"),d(17),l()(),a(18,"p"),d(19,"Tipo de tarefa: "),a(20,"strong"),d(21),l()(),a(22,"p"),d(23,"Estado da tarefa: "),a(24,"strong"),d(25),l()(),a(26,"p"),d(27,"Programador atribu\xEDdo: "),a(28,"strong"),d(29),l()(),a(30,"p"),d(31,"Data cria\xE7\xE3o: "),a(32,"strong"),d(33),l()()()(),a(34,"div",13)(35,"ion-button",14),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.setOpen(e))}),d(36," eliminar "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.tituloTarefa),s(4),x(i.descricao),s(4),x(i.dataPrevistaInicio),s(4),x(i.dataPrevistaFim),s(4),x(i.tipoTarefa==null?null:i.tipoTarefa.nome),s(4),x(i.estadoTarefa),s(4),x(i.programador==null?null:i.programador.nome),s(4),x(i.dataCriacao)}}function En(o,n){if(o&1&&(a(0,"ion-list")(1,"ion-item"),u(2,"ion-input",20),l(),a(3,"ion-item"),u(4,"ion-input",21),l()()),o&2){let i=m(3);s(2),_("placeholder",D(i.tarefaDelete.idTarefa)),s(2),_("placeholder",D(i.tarefaDelete.tituloTarefa))}}function vn(o,n){if(o&1){let i=S();a(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),d(3,"Eliminar tarefa"),l(),a(4,"ion-buttons",15)(5,"ion-button",16),T("click",function(){c(i);let e=m(2);return p(e.cancel())}),d(6,"Fechar"),l()(),a(7,"ion-buttons",17)(8,"ion-button",18),T("click",function(){c(i);let e=m(2);return p(e.confirm())}),d(9,"Eliminar"),l()()()(),a(10,"ion-content",19),C(11,En,5,4,"ion-list"),l()}if(o&2){let i=m(2);s(11),h(i.tarefaDelete?11:-1)}}function wn(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Eliminar tarefa"),l(),a(2,"ion-grid")(3,"ion-row",1)(4,"ion-col",2)(5,"ion-item")(6,"ion-input",3),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()()(),a(7,"ion-col",4)(8,"ion-item")(9,"ion-select",5),b("ngModelChange",function(e){c(i);let r=m();return I(r.filtroTipoTarefa,e)||(r.filtroTipoTarefa=e),p(e)}),a(10,"ion-select-option",6),d(11,"Todos"),l(),E(12,hn,2,2,"ion-select-option",7,Le),l()()(),a(14,"ion-col",4)(15,"ion-item")(16,"ion-select",8),b("ngModelChange",function(e){c(i);let r=m();return I(r.filtroProgramador,e)||(r.filtroProgramador=e),p(e)}),a(17,"ion-select-option",6),d(18,"Todos"),l(),E(19,xn,2,2,"ion-select-option",7,gn),l()()()(),a(21,"ion-row",1)(22,"ion-col",4)(23,"ion-item")(24,"ion-select",9),b("ngModelChange",function(e){c(i);let r=m();return I(r.filtroEstadoTarefa,e)||(r.filtroEstadoTarefa=e),p(e)}),a(25,"ion-select-option",6),d(26,"Todos"),l(),E(27,Tn,2,2,"ion-select-option",7,un),l()()()()(),E(29,Sn,37,8,"ion-card",null,k),a(31,"ion-modal",10),T("willDismiss",function(e){c(i);let r=m();return p(r.onWillDismiss(e))}),Z(32,vn,12,1,"ng-template"),l()}if(o&2){let i=m();s(6),w("ngModel",i.searchTerm),s(3),w("ngModel",i.filtroTipoTarefa),s(3),v(i.tipoTarefas),s(4),w("ngModel",i.filtroProgramador),s(3),v(i.programadores),s(5),w("ngModel",i.filtroEstadoTarefa),s(3),v(i.estadoTarefas),s(2),v(i.filteredTarefas)}}var ni=(()=>{let n=class n{constructor(t,e,r,g,M){this.loadingState=t,this.tarefaService=e,this.alertController=r,this.tipoTarefaService=g,this.programadorService=M,this.tarefas=[],this.tarefaDelete=null,this.searchTerm="",this.filtroTipoTarefa="",this.filtroProgramador="",this.filtroEstadoTarefa="",this.programadores=[],this.tipoTarefas=[],this.estadoTarefas=[],this.loading$=this.loadingState.loading$}ngOnInit(){this.getDados()}get filteredTarefas(){return this.tarefas.filter(t=>{let e=!this.searchTerm||t.tituloTarefa?.toLowerCase().includes(this.searchTerm.toLowerCase()),r=!this.filtroTipoTarefa||t.tipoTarefa?.idTipoTarefa===this.filtroTipoTarefa,g=!this.filtroProgramador||t.programador?.idUser===this.filtroProgramador,M=!this.filtroEstadoTarefa||t.estadoTarefa.toString()===this.filtroEstadoTarefa;return e&&r&&g&&M})}getDados(){this.loadingState.setLoadingState(!0),Se({tarefas:this.tarefaService.getTarefas(),programador:this.programadorService.getAllProgramadores(),tipoTarefa:this.tipoTarefaService.getAllTipoTarefas(),estadoTarefa:this.tarefaService.getEstadosTarefas()}).subscribe({next:({tarefas:t,programador:e,tipoTarefa:r,estadoTarefa:g})=>{this.programadores=e,this.tipoTarefas=r,this.estadoTarefas=g,this.tarefas=t},error:t=>{this.presentAlert("Erro",t.error?.error||"Erro inesperado")},complete:()=>{this.loadingState.setLoadingState(!1)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}setOpen(t){this.tarefaDelete=t,this.modal.backdropDismiss=!1,this.modal.present()}cancel(){this.modal.dismiss(null,"cancel")}confirm(){this.modal.dismiss(null,"confirm")}onWillDismiss(t){t.detail.role==="confirm"&&this.tarefaDelete?this.tarefaService.eliminarTarefa(this.tarefaDelete.idTarefa).subscribe({next:r=>{this.presentAlert("Sucesso",r.message||"Tipo de tarefa eliminado com sucesso."),this.getDados()},error:r=>{this.presentAlert("ERRO",r.error.error)}}):(this.tarefaDelete=null,this.getDados())}};n.\u0275fac=function(e){return new(e||n)(f(G),f(ye),f(N),f(Te),f(pe))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-eliminar-tarefa"]],viewQuery:function(e,r){if(e&1&&re(z,5),e&2){let g;ae(g=le())&&(r.modal=g.first)}},decls:3,vars:3,consts:[[1,"mb-4","text-center"],[1,"ion-align-items-center"],["size","12","size-md","6"],["placeholder","Pesquisar por t\xEDtulo...",3,"ngModelChange","ngModel"],["size","6","size-md","3"],["label","Tipo de tarefa","placeholder","Tipo de tarefa",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["label","Programador","placeholder","Programador",3,"ngModelChange","ngModel"],["label","Estado da tarefa","placeholder","Estado",3,"ngModelChange","ngModel"],[3,"willDismiss"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small","color","danger",3,"click"],["slot","start"],[3,"click"],["slot","end"],["color","danger",3,"click"],[1,"ion-padding"],["label","ID: ","disabled","true",3,"placeholder"],["label","Titulo tarefa: ","disabled","true",3,"placeholder"]],template:function(e,r){e&1&&(C(0,Cn,1,0,"app-loading"),L(1,"async"),F(2,wn,33,4)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[se,Q,te,be,Ie,ee,X,O,Y,W,J,K,j,z,ie,ne,oe,U,$,H,we,me,de,B],encapsulation:2});let o=n;return o})();function In(o,n){if(o&1){let i=S();a(0,"ion-fab-button",6),T("click",function(){let e=c(i).$implicit,r=m();return p(r.handleAction(e.text))}),a(1,"ion-icon",7),d(2),l()()}if(o&2){let i=n.$implicit;_("title",i.text),s(),_("ios",i.icon+"-outline")("md",i.icon+"-sharp"),s(),x(i.text)}}function bn(o,n){if(o&1){let i=S();a(0,"ion-fab-button",6),T("click",function(){let e=c(i).$implicit,r=m();return p(r.handleAction(e.text))}),a(1,"ion-icon",7),d(2),l()()}if(o&2){let i=n.$implicit;_("title",i.text),s(),_("ios",i.icon+"-outline")("md",i.icon+"-sharp"),s(),x(i.text)}}function yn(o,n){o&1&&u(0,"app-gestor-criar-tipo-tarefa")}function Pn(o,n){o&1&&u(0,"app-gestor-editar-tipo-tarefa")}function Dn(o,n){o&1&&u(0,"app-gestor-eliminar-tipo-tarefa")}function Mn(o,n){o&1&&u(0,"app-gestor-criar-tarefa")}function Vn(o,n){o&1&&u(0,"app-gestor-editar-tarefa")}function Gn(o,n){o&1&&u(0,"app-gestor-eliminar-tarefa")}var ri=(()=>{let n=class n{constructor(t){this.tittleService=t,this.actualPage="Criar tarefa",this.actionsCima=[{text:"Criar tarefa",icon:"calendar-clear"},{text:"Editar tarefa",icon:"calendar"},{text:"Eliminar tarefa",icon:"trash"}],this.actionsDireita=[{text:"Criar tipo tarefa",icon:"add"},{text:"Editar tipo tarefa",icon:"create"},{text:"Eliminar tipo tarefa",icon:"trash-bin"}],qe({addOutline:bt,addSharp:yt,createOutline:Ne,createSharp:Ue,trashOutline:Re,trashSharp:ze,calendarOutline:Mt,calendarSharp:Vt,calendarClearOutline:Pt,calendarClearSharp:Dt,trashBinOutline:Gt,trashBinSharp:Ft,chevronUpCircle:je})}ngOnInit(){this.tittleService.setTitle("Tarefas")}handleAction(t){this.actualPage=t}};n.\u0275fac=function(e){return new(e||n)(f(ge))},n.\u0275cmp=P({type:n,selectors:[["app-gestor-tarefas"]],decls:17,vars:7,consts:[[1,"ion-padding",3,"fullscreen"],["slot","fixed","vertical","bottom","horizontal","end"],["name","chevron-up-circle"],["side","start"],[3,"title"],["side","top"],[3,"click","title"],[3,"ios","md"]],template:function(e,r){e&1&&(a(0,"ion-content",0)(1,"ion-fab",1)(2,"ion-fab-button"),u(3,"ion-icon",2),l(),a(4,"ion-fab-list",3),E(5,In,3,4,"ion-fab-button",4,k),l(),a(7,"ion-fab-list",5),E(8,bn,3,4,"ion-fab-button",4,k),l()(),a(10,"div"),C(11,yn,1,0,"app-gestor-criar-tipo-tarefa"),C(12,Pn,1,0,"app-gestor-editar-tipo-tarefa"),C(13,Dn,1,0,"app-gestor-eliminar-tipo-tarefa"),C(14,Mn,1,0,"app-gestor-criar-tarefa"),C(15,Vn,1,0,"app-gestor-editar-tarefa"),C(16,Gn,1,0,"app-gestor-eliminar-tarefa"),l()()),e&2&&(_("fullscreen",!1),s(5),v(r.actionsDireita),s(3),v(r.actionsCima),s(3),h(r.actualPage==="Criar tipo tarefa"?11:-1),s(),h(r.actualPage==="Editar tipo tarefa"?12:-1),s(),h(r.actualPage==="Eliminar tipo tarefa"?13:-1),s(),h(r.actualPage==="Criar tarefa"?14:-1),s(),h(r.actualPage==="Editar tarefa"?15:-1),s(),h(r.actualPage==="Eliminar tarefa"?16:-1))},dependencies:[Q,Ae,Be,We,Oe,Kt,Zt,ei,Xt,oi,ni],encapsulation:2});let o=n;return o})();function Fn(o,n){o&1&&u(0,"app-loading")}function kn(o,n){if(o&1){let i=S();a(0,"ion-card",9)(1,"ion-card-header")(2,"ion-card-title"),d(3),l(),a(4,"ion-card-subtitle"),d(5),l()(),a(6,"ion-card-content")(7,"p"),d(8),l(),a(9,"p")(10,"strong"),d(11,"Descri\xE7\xE3o:"),l(),d(12),l(),a(13,"p")(14,"strong"),d(15,"Tipo de tarefa:"),l(),d(16),l(),a(17,"p")(18,"strong"),d(19,"Prioridade:"),l(),d(20),l(),a(21,"p")(22,"strong"),d(23,"StoryPoint:"),l(),d(24),l(),a(25,"p")(26,"strong"),d(27,"Data de In\xEDcio Planejada:"),l(),d(28),l(),a(29,"p")(30,"strong"),d(31,"Data de Fim Planejada:"),l(),d(32),l(),a(33,"p")(34,"strong"),d(35,"Data de In\xEDcio Real:"),l(),d(36),l(),a(37,"p")(38,"strong"),d(39,"Data de Fim Real:"),l(),d(40),l(),a(41,"div",10)(42,"ion-button",11),T("click",function(){let e=c(i).$implicit,r=m(2);return p(r.alterarEstadoTarefa(e))}),d(43),l()()()()}if(o&2){let i=n.$implicit,t=m(2);s(3),x(i.tituloTarefa),s(2),y("Estado: ",i.estadoTarefa),s(3),x(i.descricao),s(4),y(" ",i.descricao),s(4),y(" ",i.tipoTarefa==null?null:i.tipoTarefa.nome),s(4),y(" ",i.ordemExecucao),s(4),y(" ",i.storyPoint),s(4),y(" ",i.dataPrevistaInicio),s(4),y(" ",i.dataPrevistaFim),s(4),y(" ",i.dataRealInicio||"N/A"),s(4),y(" ",i.dataRealFim||"N/A"),s(2),_("disabled",t.mudarPara===""),s(),y(" Mudar para ",t.mudarPara," ")}}function Ln(o,n){if(o&1){let i=S();a(0,"h2",0),d(1,"Tarefas"),l(),a(2,"ion-grid")(3,"ion-row",1)(4,"ion-col",2)(5,"ion-item")(6,"ion-input",3),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()()(),a(7,"ion-col",4)(8,"ion-item")(9,"ion-select",5),b("ngModelChange",function(e){c(i);let r=m();return I(r.estadoTarefa,e)||(r.estadoTarefa=e),p(e)}),T("ionChange",function(){c(i);let e=m();return p(e.buscarDados())}),a(10,"ion-select-option",6),d(11,"To Do"),l(),a(12,"ion-select-option",7),d(13,"Doing"),l(),a(14,"ion-select-option",8),d(15,"Done"),l()()()()()(),E(16,kn,44,13,"ion-card",9,Le)}if(o&2){let i=m();s(6),w("ngModel",i.searchTerm),s(3),w("ngModel",i.estadoTarefa),s(7),v(i.filteredTarefas)}}var ai=(()=>{let n=class n{constructor(t,e,r,g){this.alertController=t,this.loadingState=e,this.tarefaService=r,this.titleService=g,this.loading$=this.loadingState.loading$,this.estadosTarefas=[],this.tarefas=[],this.estadoTarefa="ToDo",this.searchTerm="",this.mudarPara=""}ngOnInit(){this.buscarDados(),this.titleService.setTitle("Minhas Tarefas")}get filteredTarefas(){return this.tarefas.filter(t=>!this.searchTerm||t.tituloTarefa?.toLowerCase().includes(this.searchTerm.toLowerCase()))}buscarDados(){this.loadingState.setLoadingState(!0),Se({tarefa:this.tarefaService.getTarefasPorEstado(this.estadoTarefa),estado:this.tarefaService.getEstadosTarefas()}).subscribe({next:({tarefa:t,estado:e})=>{this.tarefas=t,this.estadosTarefas=e,this.estadoTarefa=="ToDo"?this.mudarPara="Doing":this.estadoTarefa=="Doing"?this.mudarPara="Done":this.mudarPara=""},error:t=>{this.presentAlert("Erro",t.error?.error||"Erro inesperado")},complete:()=>{this.loadingState.setLoadingState(!1)}})}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}alterarEstadoTarefa(t){this.loadingState.setLoadingState(!0),this.tarefaService.changeStatusTarefa(t.idTarefa).subscribe({next:e=>{this.presentAlert("Sucesso",e.message)},error:e=>{this.presentAlert("Erro",e.error?.error||"Erro inesperado")},complete:()=>{this.buscarDados()}})}};n.\u0275fac=function(e){return new(e||n)(f(N),f(G),f(ye),f(ge))},n.\u0275cmp=P({type:n,selectors:[["app-programador-tarefas"]],decls:3,vars:3,consts:[[1,"mb-4","text-center"],[1,"ion-align-items-center"],["size","12","size-md","6"],["placeholder","Pesquisar por t\xEDtulo...",3,"ngModelChange","ngModel"],["size","6","size-md","3"],["label","Estado da tarefa",3,"ngModelChange","ionChange","ngModel"],["value","ToDo"],["value","Doing"],["value","Done"],[1,"mb-3"],[1,"ion-text-end","mt-2"],["size","small","color","primary",3,"click","disabled"]],template:function(e,r){e&1&&(C(0,Fn,1,0,"app-loading"),L(1,"async"),F(2,Ln,18,2)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[O,tt,St,X,et,K,we,$,be,Ie,j,Y,W,J,me,de,B],encapsulation:2});let o=n;return o})();function An(o){o.CapacitorUtils.Synapse=new Proxy({},{get(n,i){return new Proxy({},{get(t,e){return(r,g,M)=>{let Pe=o.Capacitor.Plugins[i];if(Pe===void 0){M(new Error(`Capacitor plugin ${i} not found`));return}if(typeof Pe[e]!="function"){M(new Error(`Method ${e} not found in Capacitor plugin ${i}`));return}V(null,null,function*(){try{let ke=yield Pe[e](r);g(ke)}catch(ke){M(ke)}})}}})}})}function Bn(o){o.CapacitorUtils.Synapse=new Proxy({},{get(n,i){return o.cordova.plugins[i]}})}function li(o=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!o?An(window):window.cordova!==void 0&&Bn(window))}var si=Lt("Filesystem",{web:()=>import("./chunk-NA5PLKJL.js").then(o=>new o.FilesystemWeb)});li();var Wn=(o,n)=>n.estadoTarefa,On=(o,n)=>n.gestor.idUser,$n=(o,n)=>n.idUser,jn=(o,n)=>n.idTarefa;function Nn(o,n){o&1&&u(0,"app-loading")}function Un(o,n){if(o&1&&(a(0,"p",2),d(1,"Tarefas de: "),a(2,"strong"),d(3),l()()),o&2){let i=m(2);s(3),x(i.programadorSelecionadoNome)}}function Rn(o,n){if(o&1&&(a(0,"ion-select-option",7),d(1),l()),o&2){let i=n.$implicit;_("value",i.estadoTarefa),s(),x(i.estadoTarefa)}}function zn(o,n){if(o&1){let i=S();a(0,"ion-row")(1,"ion-col",4)(2,"ion-select",5),b("ngModelChange",function(e){c(i);let r=m(2);return I(r.filtroEstado,e)||(r.filtroEstado=e),p(e)}),a(3,"ion-select-option",6),d(4,"Todos os estados"),l(),E(5,Rn,2,2,"ion-select-option",7,Wn),l()(),a(7,"ion-col",8)(8,"ion-button",9),T("click",function(){c(i);let e=m(2);return p(e.exportarTarefasParaCSV())}),d(9,"Exportar CSV"),l()()()}if(o&2){let i=m(2);s(2),w("ngModel",i.filtroEstado),s(3),v(i.estadoTarefas)}}function qn(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",10)(3,"ion-label")(4,"h2",11),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",12)(11,"ion-button",13),T("click",function(){let e=c(i).$implicit,r=m(3);return p(r.verProgramadores(e))}),d(12),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.gestor.nome),s(2),x(i.gestor.email),s(2),y("Departamento: ",i.gestor.departamento),s(2),_("disabled",i.programadores.length===0),s(),y(" Ver Programadores (",i.programadores.length,") ")}}function Qn(o,n){if(o&1&&E(0,qn,13,5,"ion-card",null,On),o&2){let i=m(2);v(i.filteredItems)}}function Hn(o,n){if(o&1){let i=S();a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",10)(3,"ion-label")(4,"h2",11),d(5),l(),a(6,"p"),d(7),l(),a(8,"p"),d(9),l()()(),a(10,"div",12)(11,"ion-button",14),T("click",function(){let e=c(i).$implicit,r=m(3);return p(r.verTarefas(e))}),d(12," Ver Tarefas "),l()()()()}if(o&2){let i=n.$implicit;s(5),x(i.nome),s(2),x(i.email),s(2),y("N\xEDvel: ",i.nivelExperiencia)}}function Jn(o,n){if(o&1&&E(0,Hn,13,3,"ion-card",null,$n),o&2){let i=m(2);v(i.filteredItems)}}function Yn(o,n){o&1&&(a(0,"div",15)(1,"p"),d(2,"Nenhuma tarefa encontrada."),l()())}function Kn(o,n){if(o&1&&(a(0,"ion-card")(1,"ion-card-content")(2,"ion-item",10)(3,"ion-label")(4,"h2",11),d(5),l(),a(6,"p"),d(7,"Descri\xE7\xE3o: "),a(8,"strong"),d(9),l()(),a(10,"p"),d(11,"Data prevista inicio: "),a(12,"strong"),d(13),l()(),a(14,"p"),d(15,"Data prevista termino: "),a(16,"strong"),d(17),l()(),a(18,"p"),d(19,"Data real inicio: "),a(20,"strong"),d(21),l()(),a(22,"p"),d(23,"Data real termino: "),a(24,"strong"),d(25),l()(),a(26,"p"),d(27,"Tipo de tarefa: "),a(28,"strong"),d(29),l()(),a(30,"p"),d(31,"Estado da tarefa: "),a(32,"strong"),d(33),l()(),a(34,"p"),d(35,"Programador atribu\xEDdo: "),a(36,"strong"),d(37),l()(),a(38,"p"),d(39,"Data cria\xE7\xE3o: "),a(40,"strong"),d(41),l()()()()()()),o&2){let i=n.$implicit;s(5),x(i.tituloTarefa),s(4),x(i.descricao),s(4),x(i.dataPrevistaInicio),s(4),x(i.dataPrevistaFim),s(4),x(i.dataRealInicio),s(4),x(i.dataRealFim),s(4),x(i.tipoTarefa==null?null:i.tipoTarefa.nome),s(4),x(i.estadoTarefa),s(4),x(i.programador==null?null:i.programador.nome),s(4),x(i.dataCriacao)}}function Xn(o,n){if(o&1&&(C(0,Yn,3,0,"div",15),E(1,Kn,42,10,"ion-card",null,jn)),o&2){let i=m(2);h(i.filteredItems.length===0?0:-1),s(),v(i.filteredItems)}}function Zn(o,n){if(o&1){let i=S();a(0,"ion-grid")(1,"ion-row")(2,"ion-col",0)(3,"ion-button",1),T("click",function(){c(i);let e=m();return p(e.voltarBtn())}),d(4," Voltar "),l(),C(5,Un,4,1,"p",2),l()(),a(6,"ion-row")(7,"ion-col",0)(8,"ion-input",3),b("ngModelChange",function(e){c(i);let r=m();return I(r.searchTerm,e)||(r.searchTerm=e),p(e)}),l()()(),C(9,zn,10,1,"ion-row"),l(),C(10,Qn,2,0)(11,Jn,2,0)(12,Xn,3,1)}if(o&2){let i=m();s(3),_("disabled",i.btnIsDisabled),s(2),h(i.viewState==="TAREFAS"?5:-1),s(3),_("placeholder",i.viewState==="TAREFAS"?"Pesquisar tarefa...":"Pesquisar por nome ou email..."),w("ngModel",i.searchTerm),s(),h(i.viewState=="TAREFAS"?9:-1),s(),h(i.viewState==="GESTORES"?10:i.viewState==="PROGRAMADORES"?11:i.viewState==="TAREFAS"?12:-1)}}var di=(()=>{let n=class n{constructor(t,e,r,g,M){this.loadingState=t,this.alertController=e,this.titleService=r,this.tarefaService=g,this.programadorService=M,this.dadosGerais=[],this.currentProgramadores=[],this.currentTarefas=[],this.estadoTarefas=[],this.filtroEstado="",this.viewState="GESTORES",this.gestorSelecionadoId="",this.programadorSelecionadoNome="",this.loading$=this.loadingState.loading$,this.searchTerm=""}ngOnInit(){this.titleService.setTitle("Tarefas dos Programadores"),this.buscarDadosIniciais()}buscarDadosIniciais(){this.loadingState.setLoadingState(!0),this.programadorService.getAllProgramadoresAndGestores().subscribe({next:t=>{this.dadosGerais=t,this.loadingState.setLoadingState(!1)},error:t=>{this.presentAlert("Erro",t.error?.error||"Erro ao carregar lista."),this.loadingState.setLoadingState(!1)}})}get filteredItems(){let t=this.searchTerm.toLowerCase().trim();return this.viewState==="GESTORES"?t?this.dadosGerais.filter(e=>e.gestor.nome.toLowerCase().includes(t)||e.gestor.email.toLowerCase().includes(t)):this.dadosGerais:this.viewState==="PROGRAMADORES"?t?this.currentProgramadores.filter(e=>e.nome.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)):this.currentProgramadores:this.viewState==="TAREFAS"?this.currentTarefas.filter(e=>{let r=!t||e.tituloTarefa.toLowerCase().includes(t),g=!this.filtroEstado||e.estadoTarefa.toString()===this.filtroEstado;return r&&g}):[]}gerarCSV(){let t=["T\xEDtulo","Descri\xE7\xE3o","Ordem Execu\xE7\xE3o","Story Point","Estado","Data Prevista In\xEDcio","Data Prevista Fim","Data Real In\xEDcio","Data Real Fim","Data Cria\xE7\xE3o","Tipo Tarefa","Programador"],e=this.currentTarefas.map(r=>[`"${r.tituloTarefa}"`,`"${r.descricao||""}"`,`"${r.ordemExecucao}"`,`"${r.storyPoint}"`,`"${r.estadoTarefa||""}"`,`"${r.dataPrevistaInicio||""}"`,`"${r.dataPrevistaFim||""}"`,`"${r.dataRealInicio||""}"`,`"${r.dataRealFim||""}"`,`"${r.dataCriacao||""}"`,`"${r.tipoTarefa?.nome||""}"`,`"${r.programador?.nome||""}"`]);return[t.join(","),...e.map(r=>r.join(","))].join(`\r
`)}salvarCSVnoPC(t){let e=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(e),g=document.createElement("a");g.href=r,g.download=`tarefas_${Date.now()}.csv`,g.click(),URL.revokeObjectURL(r)}salvarCSVnativo(t){return V(this,null,function*(){yield si.writeFile({path:`tarefas_${Date.now()}.csv`,data:t,directory:At.Documents,encoding:Bt.UTF8})})}exportarTarefasParaCSV(){return V(this,null,function*(){try{let t=this.gerarCSV();kt.getPlatform()==="web"?this.salvarCSVnoPC(t):yield this.salvarCSVnativo(t),this.presentAlert("Sucesso","CSV exportado com sucesso!")}catch(t){console.error(t),this.presentAlert("Erro","Falha ao exportar CSV.")}})}verProgramadores(t){this.gestorSelecionadoId=t.gestor.idUser,this.currentProgramadores=t.programadores,this.viewState="PROGRAMADORES",this.searchTerm=""}verTarefas(t){this.loadingState.setLoadingState(!0),this.programadorSelecionadoNome=t.nome,Se({tarefa:this.tarefaService.getTarefaByIdProgramador(t.idUser),estado:this.tarefaService.getEstadosTarefas()}).subscribe({next:({tarefa:e,estado:r})=>{this.currentTarefas=e,this.estadoTarefas=r,this.viewState="TAREFAS",this.searchTerm=""},error:e=>{this.presentAlert("Erro",e.error?.error||"Erro ao carregar tarefas."),this.viewState="GESTORES",this.currentTarefas=[]},complete:()=>{this.loadingState.setLoadingState(!1)}})}voltarBtn(){this.searchTerm="",this.viewState==="TAREFAS"?(this.viewState="PROGRAMADORES",this.currentTarefas=[]):this.viewState==="PROGRAMADORES"&&(this.viewState="GESTORES",this.currentProgramadores=[])}get btnIsDisabled(){return this.viewState==="GESTORES"}presentAlert(t,e){return V(this,null,function*(){yield(yield this.alertController.create({header:t,message:e,buttons:["Confirmar"]})).present()})}};n.\u0275fac=function(e){return new(e||n)(f(G),f(N),f(ge),f(ye),f(pe))},n.\u0275cmp=P({type:n,selectors:[["app-dono-tarefas"]],decls:3,vars:3,consts:[["size","12",1,"ion-text-center"],["size","medium",1,"mb-3",3,"click","disabled"],[1,"mt-2"],[3,"ngModelChange","placeholder","ngModel"],["size","6"],["label","Estado da tarefa",1,"mt-2",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["size","6",1,"ion-text-end"],[3,"click"],["lines","none"],[1,"fw-bold"],[1,"ion-text-end","mt-2"],["size","small",3,"click","disabled"],["size","small","color","tertiary",3,"click"],[1,"ion-text-center","mt-4"]],template:function(e,r){e&1&&(C(0,Nn,1,0,"app-loading"),L(1,"async"),F(2,Zn,13,6)),e&2&&h(A(1,1,r.loading$)?0:2)},dependencies:[ee,$,K,de,me,X,U,O,we,be,Ie,j,Y,W,J,B],encapsulation:2});let o=n;return o})();function er(o,n){o&1&&u(0,"app-login")}function tr(o,n){o&1&&u(0,"app-dono-gestor")}function ir(o,n){o&1&&u(0,"app-dono-programador")}function or(o,n){o&1&&u(0,"app-dono-tarefas")}function nr(o,n){o&1&&u(0,"app-gestor-programador")}function rr(o,n){o&1&&u(0,"app-gestor-tarefas")}function ar(o,n){o&1&&u(0,"app-programador-tarefas")}var ts=(()=>{let n=class n{constructor(t){this.loadingState=t,this.activatedRoute=ft(Ct),this.loading$=this.loadingState.loading$}ngOnInit(){this.folder=this.activatedRoute.snapshot.paramMap.get("id"),this.folder=this.folder.replace(/-/g," ")}};n.\u0275fac=function(e){return new(e||n)(f(G))},n.\u0275cmp=P({type:n,selectors:[["app-folder"]],decls:14,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"]],template:function(e,r){e&1&&(a(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),u(3,"ion-menu-button"),l(),a(4,"ion-title"),d(5),l()()(),a(6,"ion-content",2),C(7,er,1,0,"app-login")(8,tr,1,0,"app-dono-gestor")(9,ir,1,0,"app-dono-programador")(10,or,1,0,"app-dono-tarefas")(11,nr,1,0,"app-gestor-programador")(12,rr,1,0,"app-gestor-tarefas")(13,ar,1,0,"app-programador-tarefas"),l()),e&2&&(_("translucent",!0),s(5),x(r.folder),s(),_("fullscreen",!0),s(),h(r.folder==="login"?7:r.folder==="dono gestor"?8:r.folder==="dono programador"?9:r.folder==="dono tarefas"?10:r.folder==="gestor programador"?11:r.folder==="gestor tarefas"?12:r.folder==="programador tarefas"?13:-1))},dependencies:[ie,ne,oe,Q,Ot,wt,te,Rt,Jt,H,Yt,ri,ai,di],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]});let o=n;return o})();export{ts as FolderPage};
